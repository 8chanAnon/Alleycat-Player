<!DOCTYPE html><html><head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Youtube Player</title>

<style type="text/css">

.widevid {
  position: relative;
  width: 72vw;
  max-width: 130vh;
  padding-bottom: calc(56.25% - 1.5px);
  overflow: hidden;
  border: 2px solid red;
  background-color: indigo;
}

.widevid img {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: auto;
  margin: auto;
  border: none;
}

.televid {
  position: relative;
  width: 60vw;
  padding-bottom: 45vw;
  overflow: hidden;
  border: 2px solid red;
  background-color: indigo;
}

.televid img {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: auto;
  margin: auto;
  border: none;
}

.msgbox {
  position: absolute;
  top: 33%;
  left: 40%;
  right: 40%;
  text-align: center;
  border-radius: 10px;
  font-style: italic;
  background-color: slateblue;
  color: lavender;
}

iframe {
  position: absolute;
  width: 100%;
  height: 100%;
  margin: auto;
  border: none;
  background-color: transparent;
}

.popbox {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}

.popbox table {
  width: 100%;
  border:none;
  table-layout: fixed;
}

.popbox td {
  padding: 10px 10px 3px 10px;
}

.popbox button {
  width: 100%;
  text-align: left;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  padding: 2px 5px 2px 5px;
  pointer-events: auto;
  font-family: 'segoe ui', serif;
  font-size: 12px;
  line-height: 14px;
  border-width: 1px;
  color: maroon;
}

select {
  border-width: 2px;
  border-style: solid;
  border-color: tan lemonchiffon lemonchiffon burlywood;
  margin: -3px;
  padding: 2px;
  background-color: cornsilk;
  color: brown;
}

select.stack {
  width: 100%;
  max-width: 97%;
  margin: 0 0 0 3px;
  font-size: 0.9em;
  background-color: papayawhip;
  color: firebrick;
}

select.sites {
  font-size: 0.9em;
  background-color: papayawhip;
  color: red;
}

select.basic {
  font-size: 0.9em;
}

input {
  border-width: 2px;
  border-style: solid;
  border-color: tan lemonchiffon lemonchiffon burlywood;
  padding: 3px 4px 2px 5px;
}

input.idspec {
  width: 100%;
  max-width: 96%;
  margin: -2px 0 -2px 0;
  font-size: 0.9em;
  background-color: cornsilk;
  color: sienna;
}

input.urlspec {
  width: 75vw;
  background-color: cornsilk;
  color: steelblue;
}

input.static {
  text-align: center;
  padding: 2px 0 2px 0;
  border: 1px solid silver;
  background-color: papayawhip;
  color: crimson;
}

input.ir {
  margin: 0 5px 6px -2px;
}

th {
  border: 2px solid lightsalmon;
  background-color: pink;
  color:crimson;
}

table {
  border: 3px solid green;
}

td {
  text-align: left;
  vertical-align: top;
  overflow: hidden;
  font-size: 14px;
  line-height: 14px;
  padding: 0 4px 0 6px;
  color: saddlebrown;
}

td.vidbox {
  padding: 0;
  line-height: normal;
  text-align: initial;
  vertical-align: middle;
}

td.textbox {
  text-align: center;
  white-space: nowrap;
  padding: 0px 14px 0 10px;
  width: 30vw;
}

button {
  width: auto;
  height: 100%;
  font-size: 12px;
  line-height: 16px;
  background-color: powderblue;
  border-color: gainsboro;
}

button.is_off {
  margin-top: 2px;
  border-style: outset;
  background-color: pink;
}

button.is_on {
  margin-top: 2px;
  border-style: inset;
  background-color: lightgreen;
}

button.wrapper {
  width: 60px;
  font-size: 13px;
  line-height: normal;
  padding: 0 2px 0 2px;
  border: 1px solid gold;
  background-color: blanchedalmond;
  color: red;
}

button.copy {
  font-size: 18px;
  line-height: 22px;
  color: darkblue;
  background-color: pink;
}

ul {
  padding: 0 1em 0 1em;
  list-style: square;
}

li {
  margin: 5px 0 5px 0;
}

b_ {color: blue;}
r_ {color: crimson;}
g_ {color: seagreen;}
w_ {color: darkcyan;}

</style></head><body style="color:maroon;background-color:moccasin;line-height:1.2em" onunload="javascript:clear_all()">

<h1><g_>Youtube Player v7c</g_></h1>
<p><hr><p>
<g_>Pick a Proxy:</g_>&nbsp;
<select id="proxy" size=1>
  <option value="https://cors-anywhere.herokuapp.com/">cors-anywhere.herokuapp.com
  <option value="https://bypasscors.herokuapp.com/api/?url=">bypasscors.herokuapp.com
  <option value="https://api.allorigins.win/raw?url=" selected>api.allorigins.win
  <option value="https://fathomless-cliffs-85079.herokuapp.com/">fathomless-cliffs-85079.herokuapp.com
  <option value="https://xyss5.herokuapp.com/">xyss5.herokuapp.com
  <option value="">None
</select>
<!--
  <option value="https://mwdev2.igocast.com/proxy?">mwdev2.igocast.com
  <option value="https://trtbanners.mshopper.net/mobileview/proxy.php/">trtbanners.mshopper.net
//-->
<b>&nbsp;&nbsp;&nbsp;Go to <a href="#sites">Site list</a> or <a href="#movies">Movie sites</a>
  or <a href="#livestream">TV & Radio</a> or <a href="#bull">Bulletin</a> (September 14, 2019)</b>
<p>
The reason for a proxy is the security restrictions imposed by the web browser on Javascript. This is implemented via
a set of rules known as CORS (Cross-Origin Resource Sharing). It depends on certain flags set by the web server on a
file-by-file basis to indicate whether Javascript that was loaded from another server (or a local drive) is
allowed to access the file or not. A proxy server may be employed between the web browser and the web server in order
to undo the CORS restrictions so that Youtube Player will not be blocked. Proxies are sometimes
unreliable. A better solution is to install one of these extensions:
<p>
<g_>Allow CORS</g_> --
<a href="https://addons.mozilla.org/en-US/firefox/addon/access-control-allow-origin/"
  target=_blank>Firefox</a> or
<a href="https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf"
  target=_blank>Chrome-based</a> &nbsp; <b> Personal Preference:</b>
<g_>CORS Everywhere</g_> -- <a href="https://addons.mozilla.org/en-US/firefox/addon/cors-everywhere/"
  target=_blank>Firefox only</a><br>
<p>
<i>Allow CORS</i> is just an on/off switch. Is there an issue with just leaving this active always? It can block
cookies (videos on Youtube or Twitter will not play). As for security, you can choose to be paranoid if you want but
I don't see any real cause for concern. If you use a CORS unblocker, choose "None" in the above drop-down list or
uncheck "Use Proxy". Note that some sites do NOT work with a proxy. Also note that the proxy "api.allorigins.win" does
not work with Vimeo so this is no longer the default.
<p>
<i>CORS Everywhere</i> has a VERY nice feature; it can be configured to ONLY work with Youtube Player, thus avoiding
the problem of potential interference with web sites. This is how to configure: put the line "/file:\/\/\/c:\//i"
in the option box called "Activation whitelist". Be sure to enter the line exactly. What this line does is force the
tool to only activate for pages loaded from the local drive (where you have presumably saved your own copy of Youtube
Player). Special note: this tool can work with cookies though YP does not currently link to sites that require cookies
(example: "www.streamlord.com").
<p><hr><p>
Youtube Player supports playback of HLS/m3u8 and DASH/mpd videos via these two modules (whitelist accordingly):
<p><g_>
cdn.jsdelivr.net/npm/hls.js@latest<br>
reference.dashif.org/dash.js/v2.5.0/dist/dash.all.min.js
</g_><p><hr><p>
<b>Tips on using Youtube Player</b> -- these instructions are not meant to be complete. Youtube Player is
primarily designed as a hacking tool. Please experiment to determine the limits and capabilities of the tool.
<p>
The original purpose of this tool was to support backdoor access to videos on YouTube for the purpose of downloading or for
transferring the URL of a video file to an external viewer for playback. The tool has expanded considerably since
the first version and it now supports backdoor access to videos on almost 50 different sites.
<p>
There are two ways to play videos embedded in web sites. The first method is to get the ID number of the video if
such is available. Enter the ID number in the line below the "Play ID" button and press. The second method is to
use the DIG option. In this case, you would copy and paste the URL of a web page in the line beside the "DIG" button
and press. For some sites, Youtube Player will search the indicated page for the ID number of a video and then apply
the ID lookup function. Some sites do not employ video ID numbers so the DIG option is the only way to get the video.
Many web sites can be problematic due to small or major differences in page design so this may not always work. Also,
sites may sometimes change the page format so that Youtube Player can no longer find the video. For this reason, YP is
continuously being tested and updated accordingly.
<p>
A complete URL may be entered as the ID number with the caveat that the ID must be the last part of the URL with the
exception of a terminating slash or a dot extension (like ".html"). A character count is used to separate the ID
from the rest of the URL. For YouTube, an ID is always exactly 11 characters. For some sites, there is a small range
like from 6 to 8 characters. In the event that a known good ID number is rejected, you can force the ID to be
accepted by preceding it with an asterisk (*). This is seldom necessary but might be needed for very old videos.
<p>
In many cases, you have the option of choosing the resolution of the video. The format/resolution selection box has an odd
appearance due to Youtube Player's original purpose of extracting YouTube videos. YouTube, unlike every other video
storage site, uses its own special coding system for resolutions and formats (because it has so many). For example,
#22 refers to mp4-720p and #43 refers to webm-360p. Note that the webm format is only available on YouTube.
The checkbox called "Format" applies to m3u8 playback (not mp4 or mpd). If checked, the video track for the desired
resolution will be extracted from the master m3u8. Note that this cannot be done if the master file contains an audio
track separate from the video.
<p>
The button called DLoad is for m3u8 sites. Both the "No Play" and the "Format" options must be checked. The m3u8 format
(similar to m3u used for mp3) consists of multiple segments, each about 10 seconds long. In order to convert to another
format like mp4, each of these segments must be downloaded. The DLoad button will open a new window with the list
of segments. This has limited functionality. You can change the list format to text by changing the value of the variable
called "plain_text" inside the Youtube Player code. At some point, I'll figure out what more I can do with this.
<p>
<b>Viewer modes: Raw / Wrapper / Sandbox</b>
<p>
Sandboxing (implemented via the HTML <i>iframe</i> tag) is employed by Youtube Player to prevent Javascript embeds from
opening windows or popups for advertising. Sites like OpenLoad and Streamango are unsafe when used without a good popup
blocker. However, if you play the URL inside Youtube Player, these popups are very effectively blocked. Any URL may be
inserted into YP, not just videos. The native viewers in YP are sandboxed by default. However, if you employ a window
option to open the URL, you need to indicate to YP that you want the window to be sandboxed. Just check the Sandbox option.
If you don't want a sandbox but you want to run a non-video URL then check the Raw option. In the default Wrapper mode,
there are three selectable options: <i>Wrapper</i> for playing mp4/ogv/webm videos (or whatever video format your web
browser supports), <i>M3U8</i> for HLS/m3u8 files and <i>DASH</i> for DASH/mpd files.
<p>
<b>Web browser compatibility notes</b>
<p>
Microsoft Edge has native support for m3u8 and mpd. This does not conflict with Youtube Player. Videos have a strong
tendency to pixelate badly. Google Chrome and Brave also have issues with pixelation but to a much lesser extent.
Firefox has no such issue. Opera, Maxthon and Vivaldi were briefly tested. They work but pop-up windows do not size
correctly.
<p>
If the "Allow Multiple" option is not checked, windows are supposed to get re-used or closed as needed. However, I
have found two cases where the web browser incorrectly blocks the window close function in Youtube Player. Edge
does not allow a window opened in Raw mode to be closed. Firefox (on Win10 but not on WinXP) blocks in Raw mode
if the window is controlled by an extension (such as for m3u8/mpd playback).
<p>
Always keep in mind that browsers contain various "security" features that may interfere with Youtube Player. Consider
that YP is able to extract video links from numerous different sites. Your browser has no idea what is trustworthy and what
is not (even though the content is just a video). You may need to battle with the site blockers in the browser itself
and in whatever add-ons or extensions you may have. Don't blame YP. Your browser is just trying to "protect" you.
Normally, a notice of some sort should appear to warn you about blockage. Sometimes not. If a video does not play,
check the settings in your web browser or pop-up blocker. 'Nuff said. It isn't too bad overall.
<p>

<p><hr><p><h3 id="bull"><r_>Bulletin</r_> (September 14, 2019)</h3>

As usual, refer to my comments in the previous versions of the Youtube Player.
<p>
<b>Changes since the last version:</b>
<ul><li>
Bloomberg and XHamster added.
</li><li>
TV links updated: Canal 4 Guadalajara, Orient TV, CPAC
</li><li>
TV links removed: WhoMag TV, CBS Reality, RTR Planeta, Arirang TV, ABC News, NBC News
</li><li>
Some CSS changes to improve appearance and address some browser issues.
</li><li>
Added option to play YouTube videos in audio-only mode in the Internet Radio.
</li><li>
YP is now working with a different Invidious instance for YouTube vids because "invidio.us" has become slow and unreliable.
The new instance is "invidious.nixnet.xyz" which is in Germany but it has a fast connection to North America. Also, I
found the reason why Invidious fails on some videos. The default behaviour of Invidious is to link the client directly
to the Google servers but this does not work if the Google URL is encoded with the server IP address due to geo-restriction.
There is an option ("local=true") to proxy the video stream through the Invidious server, thus avoiding the problem of the
IP mismatch. YP will implement this option as needed.
</li><li>
Additionally, YP is now accessing Invidious via the official API rather than hitting the web page. This is an improvement
because a CORS proxy or unblocker is no longer required. Also note that many YouTube download tools and sites have recently
failed due to some API changes on the part of YouTube. I had to update my own code (though the code is not actually in
service anyway). The Invidious code base has been updated. GenYoutube still has not updated and it is no longer
supported in YP.
</li></ul>
<b>Previous change notes</b>
<ul><li>
Brighteon is broken. Skipping a long explanation, the best way to access Brighteon is with the Sandbox
mode. This will run an embedded Brighteon video. The native HLS/m3u8 player will not work.
</li><li>
Since Brighteon is no longer a Brightcove client, Brightcove is now a separate option.
</li></ul>
Note that the Facebook DIG also works with Instagram.
<p>
Sites accessible with a Brightcove DIG:<br>
&nbsp;- https://www.stuff.co.nz<br>
&nbsp;- https://www.nzherald.co.nz<br>
&nbsp;- https://www.miamiherald.com<br>
&nbsp;- https://time.com<br>
&nbsp;- https://www.itv.com/goodmorningbritain<br>
&nbsp;- https://www.thesun.co.uk<br>
&nbsp;- https://www.channel4.com/news<br>
&nbsp;- http://webtv.un.org<br>
&nbsp;- https://www.express.co.uk
<p>
Sites accessible with a Podcasts DIG:<br>
&nbsp;- https://podcasts.apple.com<br>
&nbsp;- https://itunes.apple.com
&nbsp;- https://www.stitcher.com<br>
&nbsp;- https://radiopublic.com<br>
&nbsp;- https://overcast.fm<br>
&nbsp;- https://www.podbean.com
<p>
Sites accessible with a JWPlayer DIG:<br>
&nbsp;- STILL nothing here yet because I lost track of the two sites where this worked.
<p><hr><p>
There are three symbols used to indicate the options available for a particular site. [#]&nbsp;means no DIG option because the
video ID is always exposed. [?]&nbsp;means that video ID numbers are not available (you have to DIG). [+]&nbsp;means that both
ID numbers and the DIG option are supported.
<p>
Here is a rundown of each site, the available video formats and the site URL (link will open a new tab or window):
<p>
<h3 id="sites"><r_>Site List</r_>
  <small> -- Go to <a href="#info">Info viewer</a> or <a href="#news">News viewer</a>
    or <a href="#free">Movie viewer</a></small></h3>

<table>

<td>YouTube		</td><td>mp4/webm	</td><td>*</td><td>[#] No Proxy!</td>
<td><a target=_blank href="https://invidious.nixnet.xyz">invidious.nixnet.xyz</a></td>
<td><a target=_blank href="https://invidio.us">invidio.us</a></td></tr>

<tr><td>BitChute	</td><td>mp4		</td><td>480p</td><td>[#] Proxy</td>
<td><a target=_blank href="https://www.bitchute.com">www.bitchute.com</a></td></tr>

<tr><td>Vimeo		</td><td>mp4		</td><td>*</td><td>[#] Proxy</td>
<td><a target=_blank href="https://vimeo.com">vimeo.com</a></td></tr>

<tr><td>InfoWars	</td><td>m3u8/mp4	</td><td>?</td><td>[+] No Proxy</td>
<td><a target=_blank href="https://www.infowars.com">www.infowars.com</a></td>
<td><a target=_blank href="https://banned.video">banned.video</a></td></tr>

<tr><td>153News		</td><td>mp4		</td><td>*</td><td>[#] Proxy</td>
<td><a target=_blank href="https://153news.net">153news.net</a></td></tr>

<tr><td>LiveLeak	</td><td>mp4		</td><td>*</td><td>[#] No Proxy</td>
<td><a target=_blank href="https://www.liveleak.com">www.liveleak.com</a></td></tr>

<tr><td>Brighteon	</td><td>m3u8		</td><td>?</td><td>[+] Proxy!</td>
<td><a target=_blank href="https://www.brighteon.com">www.brighteon.com</a></td>
<td><a target=_blank href="http://counterthink.com">counterthink.com</a></td></tr>

<tr><td>DailyMotion	</td><td>mp4		</td><td>*</td><td>[#] CORS!</td>
<td><a target=_blank href="https://www.dailymotion.com">www.dailymotion.com</a></td></tr>

<tr><td>MRCTV		</td><td>mp4		</td><td>*</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.mrctv.org">www.mrctv.org</a></td>
<td><a target=_blank href="http://www.newsbusters.org">www.newsbusters.org</a></td></tr>

<tr><td>PragerU		</td><td>mp4		</td><td>*</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.prageru.com">www.prageru.com</a></td></tr>

<tr><td>TEDTalks	</td><td>mp4		</td><td>*</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.ted.com">www.ted.com</a></td></tr>

<tr><td>Nat. Film Board	</td><td>m3u8		</td><td>*</td><td>[+] No Proxy</td>
<td><a target=_blank href="https://www.nfb.ca">www.nfb.ca</a></td></tr>

<tr><td>Facebook	</td><td>mp4		</td><td>varies</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.facebook.com">www.facebook.com</a></td>
<td><a target=_blank href="https://www.instagram.com">www.instagram.com</a></td></tr>

<tr><td>SoundCloud	</td><td>mp3		</td><td></td><td>[+] Proxy</td>
<td><a target=_blank href="https://soundcloud.com">soundcloud.com</a></td></tr>

<tr><td>Fox		</td><td>mp4		</td><td>432p</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.foxnews.com">www.foxnews.com</a></td>
<td><a target=_blank href="https://www.foxbusiness.com">www.foxbusiness.com</a></td></tr>

<tr><td>ABC		</td><td>mp4		</td><td>360p</td><td>[+] Proxy</td>
<td><a target=_blank href="https://abcnews.go.com">abcnews.go.com</a></td></tr>

<tr><td>CBS		</td><td>m3u8		</td><td>*</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.cbsnews.com">www.cbsnews.com</a></td></tr>

<tr><td>CNBC		</td><td>mp4		</td><td>*</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.cnbc.com">www.cnbc.com</a></td></tr>

<tr><td>CNN		</td><td>mp4/m3u8	</td><td>*</td><td>[?] No Proxy</td>
<td><a target=_blank href="https://www.cnn.com">www.cnn.com</a></td>
<td><a target=_blank href="https://edition.cnn.com">edition.cnn.com</a></td></tr>

<tr><td>C-SPAN		</td><td>m3u8		</td><td>*</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.c-span.org">www.c-span.org</a></td></tr>

<tr><td>MS/NBC		</td><td>mp4		</td><td>*</td><td>[+] Proxy</td>
<td><a target=_blank href="https://www.msnbc.com">www.msnbc.com</a></td>
<td><a target=_blank href="https://www.nbcnews.com">www.nbcnews.com</a></td></tr>

<tr><td>PBS		</td><td>m3u8		</td><td>*</td><td>[+] Proxy</td>
<td><a target=_blank href="https://www.pbs.org">www.pbs.org</a></td></tr>

<tr><td>CBC		</td><td>mp4		</td><td>*</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.cbc.ca">www.cbc.ca</a></td></tr>

<tr><td>CTV		</td><td>mpd		</td><td>?</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.ctvnews.ca">www.ctvnews.ca</a></td></tr>

<tr><td>Global		</td><td>mp4		</td><td>540p</td><td>[+] Proxy</td>
<td><a target=_blank href="https://globalnews.ca">globalnews.ca</a></td></tr>

<tr><td>TVO		</td><td>mp4		</td><td>360p</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.tvo.org">www.tvo.org</a></td></tr>

<tr><td>BBC		</td><td>mpd		</td><td>?</td><td>[+] Proxy</td>
<td><a target=_blank href="https://www.bbc.com">www.bbc.com</a></td>
<td><a target=_blank href="https://www.bbc.co.uk/sounds">www.bbc.co.uk/sounds</a></td></tr>

<tr><td>Press TV	</td><td>mp4		</td><td>480p</td><td>[?] No Proxy</td>
<td><a target=_blank href="https://www.presstv.com">www.presstv.com</a></td></tr>
<tr><td>Press TV Doc	</td><td>mp4		</td><td>720p</td><td>[?] Proxy</td>
<td><a target=_blank href="http://presstvdoc.com">presstvdoc.com</a></td></tr>

<tr><td>Al Jazeera	</td><td>mp4		</td><td>*</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.aljazeera.com">www.aljazeera.com</a></td></tr>

<tr><td>Bloomberg	</td><td>mp4		</td><td>*</td><td>[+] Proxy (DIG)</td>
<td><a target=_blank href="https://www.bloomberg.com">www.bloomberg.com</a></td></tr>

<tr><td>NDTV		</td><td>mp4		</td><td>320/720p</td><td>[?] Proxy</td>
<td><a target=_blank href="https://www.ndtv.com">www.ndtv.com</a></td></tr>

</table>
<p>

? = auto select (video player chooses)<br>
* = user selectable (via format box)<br>
! = use the Sandbox option to embed the video.<br>
CORS = only accessible with a CORS unblocker<br>

<p><hr><p><h3 id="movies"><r_>Movie Sites</r_>
  <small> -- Go to <a href="#free">Movie viewer</a> or <a href="#sites">Info/News</a></small></h3>

<table>

<tr><td>VidCloud	</td><td>mp4/m3u8	</td><td>?</td><td>[+] Proxy!</td>
<td><a target=_blank href="https://vidcloud.icu">vidcloud.icu</a> !</td>
<td>not = vidcloud.co</td></tr>

<tr><td>TubiTV		</td><td>m3u8		</td><td>*</td><td>[+] CORS</td>
<td><a target=_blank href="https://tubitv.com">tubitv.com</a></td></tr>

<tr><td>VeryStream	</td><td>mp4		</td><td>?</td><td>[+] CORS!</td>
<td><a target=_blank href="https://verystream.com">verystream.com</a> !</td>
<td><a target=_blank href="https://www.putlocker.fyi">www.putlocker.fyi</a> !</td></tr>

<tr><td>GoUnlimited	</td><td>mp4		</td><td>?</td><td>[+] Proxy!</td>
<td><a target=_blank href="https://gounlimited.to">gounlimited.to</a> !</td>
<td><a target=_blank href="https://www.lunchflix.com">www.lunchflix.com</a></td></tr>

<tr><td>XHamster	</td><td>mp4/webm	</td><td>*</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://xhamster.com">xhamster.com</a></td></tr>

<tr><td>PornHub		</td><td>mp4		</td><td>*</td><td>[#] CORS!</td>
<td><a target=_blank href="https://www.pornhub.com">www.pornhub.com</a> !</td></tr>

<tr><td>VidToDo		</td><td>mp4		</td><td>*</td><td>[#] CORS!</td>
<td><a target=_blank href="https://vidtodo.com">vidtodo.com</a> !</td>
<td><a target=_blank href="https://vidtodu.com">vidtodu.com</a> !</td></tr>

<tr><td>ClipWatching	</td><td>mp4		</td><td>360p</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://clipwatching.com">clipwatching.com</a> !</td></tr>

<tr><td>Flix555		</td><td>mp4		</td><td>480p</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://flix555.com">flix555.com</a> !</td></tr>

<tr><td>OnlyStream	</td><td>m3u8/mp4	</td><td>?</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://onlystream.tv">onlystream.tv</a> !</td></tr>

<tr><td>VidLox		</td><td>mp4		</td><td>?</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://vidlox.me">vidlox.me</a> !</td>
<td><a target=_blank href="https://vidlox.tv">vidlox.tv</a> !</td></tr>

<tr><td>RapidVideo	</td><td>mp4		</td><td>?</td><td>[#] CORS!</td>
<td><a target=_blank href="https://rapidvideo.com">rapidvideo.com</a> !</td></tr>

<tr><td>Vidoza		</td><td>mp4		</td><td>?</td><td>[#] CORS!</td>
<td><a target=_blank href="https://vidoza.net">vidoza.net</a> !</td></tr>

<tr><td>VideoShare	</td><td>mp4		</td><td>?</td><td>[#] Proxy!</td>
<td><a target=_blank href="https://vshare.eu">vshare.eu</a> !</td></tr>

<tr><td>AudioRealm	</td><td>mp3		</td><td></td><td>[+] Proxy</td>
<td><a target=_blank href="http://audiorealm.com">audiorealm.com</a></td></tr>

</table>
<p>
! on a site url = use caution on these sites due to popup ads<br>
! on Proxy or CORS = use the Sandbox option to embed the video.<br>
<p>
Some search sites to get video links from:
<p>
<a target=_blank href="https://ololo.to/">ololo.to</a><br>
<a target=_blank href="https://www1.swatchseries.to">www1.swatchseries.to</a><br>
<a target=_blank href="https://www.downloads-anymovies.com">www.downloads-anymovies.com</a><br>
<a target=_blank href="http://www2.project-free-tv.ag">www2.project-free-tv.ag</a>&nbsp; (alive but often sleeping)
<p>
The site "putlocker.fyi" is a search site which only serves videos from "verystream.com"<br>
Select "VeryStream" and use the DIG option to grab videos.
<p>
The site "lunchflix.com" is a search site which mainly serves videos from "gounlimited.to"<br>
Some videos are served from Google. Select "GoUnlimited" and use DIG.
<p>
None of the video upload sites below PornHub offer a search facility.
<p>
If you want to play videos from other sites, make sure that you use the embed URL.
<p>
For example:
<table>
<tr><td>Page: https://openload.co/f/{vid-id}</td><td>Embed: https://openload.co/embed/{vid-id}</td></tr>
<tr><td>Page: https://streamango.com/f/{vid-id}</td><td>Embed: https://streamango.com/embed/{vid-id}</td></tr>
<tr><td>Page: https://xstreamcdn.com/f/{vid-id}</td><td>Embed: https://xstreamcdn.com/v/{vid-id}</td></tr>
</table>

<h3 id="livestream"><r_>Internet TV</r_></h3>

Go to the <a href="#free">Movie viewer</a>, pick a TV stack and a channel and then press "Play ID". That's it.
All channels are m3u8 live streams and most are not region locked. Some channels require an initial
lookup (thus requiring a CORS proxy or unblocker) to find the direct stream URL. Such URLs are temporary and will
time out (anywhere from a few hours to two days). Youtube Player will refresh the link after two hours.
<p>
In order to facilitate channel surfing, a new feature has been added. Check the option "Allow Multiple" to activate.
This will present the stack as buttons displayed on top of the viewer. Along with that are 12 buttons for previously
selected channels. The "Copy" button will show and hide the popup. Also, pausing the video (not in full-screen) will
show the popup. You can click a blank entry to hide. All viewers have this feature.
<p>
Some channels have two stream sources. This is indicated with a plus sign (+) after the channel name. A double plus
indicates that the streams are from different local stations. The source depends on the current format selection
(regardless of whether the Format box is checked).
<p></p>
&nbsp;<r_>Bibliography</r_>

<table><tr><td>
http://ustv247.tv<br>
http://ustvgo.tv<br>
http://www.giniko.com<br>
https://www.streamgaroo.com<br>
https://www.livenewsnow.com<br>
http://tvtolive.com<br>
https://www.reddit.com/r/LiveTvLinks<br>
</td><td>
https://www.rt.com/on-air<br>
https://www.aljazeera.com/live<br>
https://www.presstv.com<br>
https://www.france24.com<br>
https://www3.nhk.or.jp<br>
http://ntv.ca/web-tv<br>
</td><td>
https://www.trtworld.com<br>
https://www.newsmaxtv.com<br>
https://freespeech.org<br>
https://www.redbull.com<br>
http://tbd.com<br>
https://xcorpstv.com<br>
</td><td>
https://www.nasa.gov/nasalive<br>
https://www.c-span.org<br>
http://www.cpac.ca<br>
http://webtv.un.org<br>
</td></tr></table>

<h3><r_>Internet Radio</r_></h3>

Simply go to the bottom of the page and press a radio button to play the Internet Radio. That's it.
For your convenience, the radio will pause when you play a video. Press the Clear button to unpause.
You can also open a radio station in a popup window.
<p>
You can input your own URL for either an mp4 or an mp3 or whatever your
browser supports. To play a YouTube video in audio-only mode, just enter the 11-character video id.
<p>
To find some radio station URLs, you can use the AudioRealm DIG tool supplied with the <a href="#free">Movie viewer</a>.
Also supplied is a stack with links to iHeartRadio and Virtual DJ. These will pop up a window with an embedded web site.

<div style="width: 90vw; height: 30vh"></div>

<!--
////////////////////////////////
///// INFO + ENTERTAINMENT /////
////////////////////////////////
//-->

<h3 id="info"><r_>Info + Entertainment</r_>
  <small>-- Go to <a href="#news">News viewer</a> or <a href="#sites">Site list</a>
  &nbsp; | &nbsp; <a href="#info">snap</a></small></h3>
<p>
<table><tr><td class=textbox>

<button onclick="javascript:open_downloader()"><b_>DLoad</b_></button>
<button onclick="javascript:loadid(5,0)">Play ID</button>
<button onclick="javascript:reset_frame(5)">Clear</button>
<p>
<input type=text id="id5" maxlength=256 class=idspec onfocus="javascript:hidelist(5)"
  onclick="javascript:input_onclick('id5')" onblur="javascript:input_onblur('id5')">
<p>
<select id="stk5" size=1 class=stack><option value="">Select a video stack</select>
<p>
<select id="src5" size=1 class=sites>
  <option value= 0 >Invidious (YouTube)&nbsp;&nbsp;&nbsp;&nbsp;
  <option value= 1 ># mp4 - BitChute
  <option value= 2 ># mp4 - Vimeo
  <option value= 3 >+ m3u - InfoWars
  <option value= 11># mp4 - 153News
  <option value= 13># mp4 - LiveLeak
  <option value= 4 >+ m3u - Brighteon
  <option value= 5 ># mp4 - DailyMotion
  <option value= 9 >+ mp4 - MRCTV
  <option value= 8 >? mp4 - PragerU
  <option value= 6 >? mp4 - TEDTalks
  <option value= 7 >+ m3u - NatFilmBrd
  <option value= 22>? mp4 - Facebook
  <option value= 20>+ mp4 - BrightCove
  <option value= 25>+ m3u - JWPlayer
  <option value= 24>+ mp3 - SoundCloud
  <option value= 23>? mp3 - Podcasts
  <option value= 10>? -------- URL Test
</select>
<p>
<input type=checkbox id="mov5f" checked> Format (m3u8)&nbsp;
<input type=checkbox id="mov5p" checked> Use Proxy
<p>
<select id="fmt5" size=6 class=basic>
  <option value=18>mp4 - [18] 360p *
  <option value=19>mp4 - [19] 480p *
  <option value=22>mp4 - [22] 720p *
  <option value=43>webm  [43] 360p *
  <option value=44>webm  [44] 480p *
  <option value=45>webm  [45] 720p *
</select>
<p>
<select id="win5" size=1 class=basic>
  <option value="320:180">[16:9] 320 x 180
  <option value="480:270">[16:9] 480 x 270
  <option value="640:360">[16:9] 640 x 360
  <option value="960:540">[16:9] 960 x 540
  <option value="1280:720">[16:9] 1280 x 720
  <option value="240:180">[4:3] 240 x 180
  <option value="360:270">[4:3] 360 x 270
  <option value="480:360">[4:3] 480 x 360
  <option value="720:540">[4:3] 720 x 540
  <option value="960:720">[4:3] 960 x 720
</select>
<p>
<button id="btn5a" class="is_off" onclick="javascript:buttonpress(5,0)">New Window</button>
<button id="btn5b" class="is_off" onclick="javascript:buttonpress(5,1)">Popup Window</button>
<p>
<input type=checkbox id="mov5m"> Allow Multiple&nbsp;
<input type=checkbox id="mov5n"> No Play
<p></p>
<input type=radio id="mov5a" name="chk5"> Raw
<input type=radio id="mov5b" name="chk5" checked><button onclick="javascript:toggle_hls(5,0)"
  class="wrapper" id="hls5">Wrapper</button><input type=radio id="mov5c" name="chk5"> Sandbox

</td><td class=vidbox>

<!-- VIDEO -->
<div class=widevid><h2 id="vid5" class=msgbox>No Video</h2><div class=popbox id="pop5"></div>
<iframe id="mov5" name="mov5" sandbox="allow-scripts allow-same-origin allow-forms"
  autoplay allowfullscreen controls></iframe>

</div></td></tr></table>

<p style="text-align:center">
<button onclick="javascript:loadid(5,1)">Play URL</button>
<button onclick="javascript:urlcopy(5)">Copy</button>
<button onclick="javascript:digid(5)"><b_>DIG</b_></button>&nbsp;

<input type=text id="line5" maxlength=1024 class=urlspec
  onclick="javascript:input_onclick('line5')" onblur="javascript:input_onblur('line5')">

<p style="text-align:center">
<button class=copy id="stk5-1" onclick="javascript:copylist(5,1)">Stack 1</button>
<button class=copy id="stk5-2" onclick="javascript:copylist(5,2)">Stack 2</button>
<button class=copy id="stk5-3" onclick="javascript:copylist(5,3)">Stack 3</button>
&nbsp;
<button class=copy id="stk5-4" onclick="javascript:copylist(5,4)">BitChute</button>
<button class=copy id="stk5-5" onclick="javascript:copylist(5,5)">Vimeo</button>
<button class=copy id="stk5-6" onclick="javascript:copylist(5,6)">InfoWars</button>
<button class=copy id="stk5-7" onclick="javascript:copylist(5,7)">Misc</button>
</p>
<div style="width: 90vw; height: 30vh"></div>

<!--
/////////////////////////////
///// NEWS & PROPAGANDA /////
/////////////////////////////
//-->

<h3 id="news"><r_>News & Propaganda</r_>
  <small>-- Go to <a href="#info">Info viewer</a> or <a href="#sites">Site list</a>
  &nbsp; | &nbsp; <a href="#news">snap</a></small></h3>
<p>
<table><tr><td class=textbox>

<button onclick="javascript:open_downloader()"><b_>DLoad</b_></button>
<button onclick="javascript:loadnews(6,0)">Play ID</button>
<button onclick="javascript:reset_frame(6)">Clear</button>
<p>
<input type=text id="id6" maxlength=256 class=idspec onfocus="javascript:hidelist(6)"
  onclick="javascript:input_onclick('id6')" onblur="javascript:input_onblur('id6')">
<p>
<select id="stk6" size=1 class=stack><option value="">Select a video stack</select>
<p>
<select id="src6" size=1 class=sites>
  <option value= 0 >Invidious (YouTube)&nbsp;&nbsp;&nbsp;&nbsp;
  <option value= 1 >+ mp4 - Fox
  <option value= 2 >+ mp4 - ABC
  <option value= 3 >? m3u - CBS
  <option value= 4 >+ mp4 - CNBC
  <option value= 5 >? mp4 - CNN
  <option value= 6 >? m3u - C-SPAN
  <option value= 7 >+ mp4 - MS/NBC
  <option value= 8 >+ m3u - PBS
  <option value= 11>+ mp4 - CBC
  <option value= 12>+ mpd - CTV
  <option value= 13>+ mp4 - Global
  <option value= 14>+ mp4 - TVO
  <option value= 21>+ mpd - BBC
  <option value= 24>? mp4 - Press TV
  <option value= 22>+ mp4 - Al Jazeera
  <option value= 25>+ mp4 - Bloomberg
  <option value= 23>? mp4 - NDTV
</select>
<p>
<input type=checkbox id="mov6f" checked> Format (m3u8)&nbsp;
<input type=checkbox id="mov6p" checked> Use Proxy
<p>
<select id="fmt6" size=6 class=basic>
  <option value=18>mp4 - [18] 360p *
  <option value=19>mp4 - [19] 480p *
  <option value=22>mp4 - [22] 720p *
  <option value=43>webm  [43] 360p *
  <option value=44>webm  [44] 480p *
  <option value=45>webm  [45] 720p *
</select>
<p>
<select id="win6" size=1 class=basic>
  <option value="320:180">[16:9] 320 x 180
  <option value="480:270">[16:9] 480 x 270
  <option value="640:360">[16:9] 640 x 360
  <option value="960:540">[16:9] 960 x 540
  <option value="1280:720">[16:9] 1280 x 720
  <option value="240:180">[4:3] 240 x 180
  <option value="360:270">[4:3] 360 x 270
  <option value="480:360">[4:3] 480 x 360
  <option value="720:540">[4:3] 720 x 540
  <option value="960:720">[4:3] 960 x 720
</select>
<p>
<button id="btn6a" class="is_off" onclick="javascript:buttonpress(6,0)">New Window</button>
<button id="btn6b" class="is_off" onclick="javascript:buttonpress(6,1)">Popup Window</button>
<p>
<input type=checkbox id="mov6m"> Allow Multiple&nbsp;
<input type=checkbox id="mov6n"> No Play
<p></p>
<input type=radio id="mov6a" name="chk6"> Raw
<input type=radio id="mov6b" name="chk6" checked><button onclick="javascript:toggle_hls(6,0)"
  class="wrapper" id="hls6">Wrapper</button><input type=radio id="mov6c" name="chk6"> Sandbox

</td><td class=vidbox>

<!-- VIDEO -->
<div class=widevid><h2 id="vid6" class=msgbox>No Video</h2><div class=popbox id="pop6"></div>
<iframe id="mov6" name="mov6" sandbox="allow-scripts allow-same-origin allow-forms"
  autoplay allowfullscreen controls></iframe>

</div></td></tr></table>

<p style="text-align:center">
<button onclick="javascript:loadnews(6,1)">Play URL</button>
<button onclick="javascript:urlcopy(6)">Copy</button>
<button onclick="javascript:dignews(6)"><b_>DIG</b_></button>&nbsp;

<input type=text id="line6" maxlength=1024 class=urlspec
  onclick="javascript:input_onclick('line6')" onblur="javascript:input_onblur('line6')">

<p style="text-align:center">
<button class=copy id="stk6-1" onclick="javascript:copylist(6,11)">Stack 1</button>
<button class=copy id="stk6-2" onclick="javascript:copylist(6,12)">Stack 2</button>
<button class=copy id="stk6-3" onclick="javascript:copylist(6,13)">Stack 3</button>
&nbsp;
<button class=copy id="stk6-4" onclick="javascript:copylist(6,14)">Fox</button>
<button class=copy id="stk6-5" onclick="javascript:copylist(6,15)">PBS</button>
<button class=copy id="stk6-6" onclick="javascript:copylist(6,16)">BBC</button>
</p>
<div style="width: 90vw; height: 30vh"></div>

<!--
////////////////////////////
///// FREE MOVIES & TV /////
////////////////////////////
//-->

<h3 id="free"><r_>FREE Movies & TV</r_>
  <small>-- Go to <a href="#movies">Movie Sites</a> or <a href="#sites">Info/News</a>
  &nbsp; | &nbsp; <a href="#free">snap</a></small></h3>
<p>
<table><tr><td class=textbox>

<button onclick="javascript:open_downloader()"><b_>DLoad</b_></button>
<button onclick="javascript:loadmovie(7,0)">Play ID</button>
<button onclick="javascript:reset_frame(7)">Clear</button>
<p>
<input type=text id="id7" maxlength=256 class=idspec onfocus="javascript:hidelist(7)"
  onclick="javascript:input_onclick('id7')" onblur="javascript:input_onblur('id7')">
<p>
<select id="stk7" size=1 class=stack><option value="">Select a radio/TV stack</select>
<p>
<select id="src7" size=1 class=sites>
  <option value= 0 >Invidious (YouTube)&nbsp;&nbsp;&nbsp;&nbsp;
  <option value= 2 >+ mp4 - VidCloud
  <option value= 3 >+ m3u - TubiTV
  <option value= 4 >+ mp4 - VeryStream
  <option value= 5 >+ mp4 - GoUnlimited
  <option value= 6 ># mp4 - XHamster
  <option value= 7 ># mp4 - PornHub
  <option value= 17># mp4 - VidToDo
  <option value= 16># mp4 - ClipWatching
  <option value= 12># mp4 - Flix555
  <option value= 19># m3u - OnlyStream
  <option value= 13># mp4 - VidLox
  <option value= 14># mp4 - RapidVideo
  <option value= 18># mp4 - Vidoza
  <option value= 15># mp4 - VideoShare
  <option value= 21>+ mp3 - AudioRealm
</select>
<p>
<input type=checkbox id="mov7f" checked> Format (m3u8)&nbsp;
<input type=checkbox id="mov7p" checked> Use Proxy
<p>
<select id="fmt7" size=6 class=basic>
  <option value=18>mp4 - [18] 360p *
  <option value=19>mp4 - [19] 480p *
  <option value=22>mp4 - [22] 720p *
  <option value=43>webm  [43] 360p *
  <option value=44>webm  [44] 480p *
  <option value=45>webm  [45] 720p *
</select>
<p>
<select id="win7" size=1 class=basic>
  <option value="320:180">[16:9] 320 x 180
  <option value="480:270">[16:9] 480 x 270
  <option value="640:360">[16:9] 640 x 360
  <option value="960:540">[16:9] 960 x 540
  <option value="1280:720">[16:9] 1280 x 720
  <option value="240:180">[4:3] 240 x 180
  <option value="360:270">[4:3] 360 x 270
  <option value="480:360">[4:3] 480 x 360
  <option value="720:540">[4:3] 720 x 540
  <option value="960:720">[4:3] 960 x 720
</select>
<p>
<button id="btn7a" class="is_off" onclick="javascript:buttonpress(7,0)">New Window</button>
<button id="btn7b" class="is_off" onclick="javascript:buttonpress(7,1)">Popup Window</button>
<p>
<input type=checkbox id="mov7m"> Allow Multiple&nbsp;
<input type=checkbox id="mov7n"> No Play
<p></p>
<input type=radio id="mov7a" name="chk7"> Raw
<input type=radio id="mov7b" name="chk7" checked><button onclick="javascript:toggle_hls(7,0)"
  class="wrapper" id="hls7">Wrapper</button><input type=radio id="mov7c" name="chk7"> Sandbox

</td><td class=vidbox>

<!-- VIDEO -->
<div class=widevid><h2 id="vid7" class=msgbox>No Video</h2><div class=popbox id="pop7"></div>
<iframe id="mov7" name="mov7" sandbox="allow-scripts allow-same-origin allow-forms"
  autoplay allowfullscreen controls></iframe>

</div></td></tr></table>

<p style="text-align:center">
<button onclick="javascript:loadmovie(7,1)">Play URL</button>
<button onclick="javascript:urlcopy(7)">Copy</button>
<button onclick="javascript:digmovie(7)"><b_>DIG</b_></button>&nbsp;

<input type=text id="line7" maxlength=1024 class=urlspec
  onclick="javascript:input_onclick('line7')" onblur="javascript:input_onblur('line7')">

<p style="text-align:center">
<button class=copy id="stk7-1" onclick="javascript:copylist(7,21)">Radio</button>
<button class=copy id="stk7-2" onclick="javascript:copylist(7,22)">Dance</button>
&nbsp;
<button class=copy id="stk7-3" onclick="javascript:copylist(7,23)">TV US1</button>
<button class=copy id="stk7-4" onclick="javascript:copylist(7,24)">TV US2</button>
<button class=copy id="stk7-5" onclick="javascript:copylist(7,25)">TV US3</button>
&nbsp;
<button class=copy id="stk7-6" onclick="javascript:copylist(7,26)">TV UK+</button>
<button class=copy id="stk7-7" onclick="javascript:copylist(7,27)">TV Alt</button>
&nbsp;
<button class=copy id="stk7-8" onclick="javascript:copylist(7,28)">Int'l 1</button>
<button class=copy id="stk7-9" onclick="javascript:copylist(7,29)">Int'l 2</button>
</p>

<div style="width: 90vw; height: 30vh"></div>

<!--
//////////////////////////
///// INTERNET RADIO /////
//////////////////////////
//-->

<h1 style="text-align:center"><r_>Internet Radio</r_></h1>

<div align=center>
<button onclick="javascript:ir_action(0)">Stop</button>
<button onclick="javascript:ir_action(1)">Pause</button>
<button onclick="javascript:ir_action(2)">Play</button> &nbsp;
<input type=text value="Stopped" size=10 class="static" id="ir_status" disabled> &nbsp;
<button onclick="javascript:ir_action(3)" class="is_off" id="ir_popup">Popup</button>
&nbsp;&nbsp; Volume :&nbsp;
<button onclick="javascript:ir_action(4)" style="font-size:13px">&lt;</button>
<input type=text value="50" size=3 class="static" id="ir_volume" disabled>
<button onclick="javascript:ir_action(5)" style="font-size:13px">&gt;</button>
</div>
<p>

<table style="width:100%">

 <tr><th>Talk Radio
</th><th>Cool Music
</th><th>Funky Music
</th><th>Just Garbage
</th><th>More Garbage
</th></tr><tr><td style="padding:4px"></td></tr><tr>

<td><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://streaming-ent.shoutcast.com/foxnews')">Fox News Talk
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://radio.talkradio.co.uk/stream')">Talk Radio UK
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://20803.live.streamtheworld.com/CFRBAMAAC_SC')">Conservative Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://216.240.133.178:3005/;')">Republic Broadcasting
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://mediaserver3.afa.net:8443/talk.mp3')">American Family Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://edge2-b.exa.live365.net/a81754')">Good Talk Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://stream.infowars.com/;')">InfoWars Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://18593.live.streamtheworld.com/BLZE_1AAC.aac')">The Blaze Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://s2.radio.co/s572ad25f7/listen')">Red State Talk
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://streamer.radio.co/s43edd6852/listen')">The Fringe FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://50.7.96.210:8265/stream')">Truth Frequency Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://live1.darkmatterdigitalnetwork.com:8303/stream')">Dark Matter Digital
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://darnwi.com:8000/stream')">Devil's Advocates Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://cast.bbstalkradio.com/proxy/bbsradio2?mp=/stream')">BBS Talk Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://ice8.securenetsystems.net/VARIETY')">Voice America
</td>

<td><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://85.25.43.55/rock_classics.mp3')">Star FM Rock Classics
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://91.121.222.81:8416/listen.mp3')">Rock Radio Beograd
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://shoutcastunlimited.com:8890/;')">Lynx Classic Rock
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://jamfm.hoerradar.de/jamfm-mp3-128')">Jam FM Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://62.210.10.4:8928/stream/1/')">Gem Radio New Wave
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://149.56.183.178:8090/;')">Retro Hits
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://stream.dancewave.online:8080/dance.mp3')">Dance Wave
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://192.99.18.107:8106/;')">Salsa Mexico
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://82.78.191.161:8010/;')">Doctor FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://nl1.lounge-radio.com:8010/;')">Lounge Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://fr3.1mix.co.uk:8000/stats/;')">1Mix Radio Trance
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://centova.radioservers.biz:8021/;')">Starlite Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://217.146.71.146:8000/live2')">Rahva Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('')">
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('')">
</td>

<td><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://virtualdjradio.com:8000/channel1.mp3')">Virtual DJ: ClubZone
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://virtualdjradio.com:8000/channel2.mp3')">Virtual DJ: TheGrind
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://virtualdjradio.com:8000/channel3.mp3')">Virtual DJ: Hypnotica
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://virtualdjradio.com:8000/channel4.mp3')">Virtual DJ: PowerBase
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://janus.cdnstream.com:5140/live')">Radio Free Americana
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://wm02.warpradio.com:8010/;')">Smooth Jazz Expressions
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://109.123.116.202:8016/;')">Venice Classic Radio Italia
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://tropicalisima.org:9002/;')">Tropicalisma FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://lin3.ash.fastserv.com:6026/stream_96')">Rockabilly Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://91.121.91.172:9414/;stream/1')">Dandelion Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://hi.entranced.fm:80/;')">Entranced FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://46.105.118.14:17500/;')">Spexx FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://5.39.82.140:8016/stream')">Colosal FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('')">
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('')">
</td>

<td><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1_mf_q')">BBC Radio 1
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1xtra_mf_q')">BBC Radio 1-Extra
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio2_mf_q')">BBC Radio 2
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio3_mf_q')">BBC Radio 3
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio4fm_mf_q')">BBC Radio 4
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio4extra_mf_q')">BBC Radio 4-Extra
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio5live_mf_q')">BBC Radio 5-Live
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bbcmedia.ic.llnwd.net/stream/bbcmedia_6music_mf_p')">BBC Radio 6-Music
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://server-14.stream-server.nl:8300/;')">Nashville FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://cp9.serverse.com:7362/autodj')">Bluegrass Jamboree
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://shoutcast.countrypowerstation.net:8000/;')">Country Power Station
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://s10.voscast.com:8872/;')">Wu World Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('8tilKaOINmE')"><w_>Danheim: <i>Mannavegr</i></w_>
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('RM_J5cFy70M')"><w_>Audiomachine: <i>Decimus</i></w_>
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('h56M8Ti6Ejw')"><w_>Classic Rock - Greatest Hits</w_>
</td>

<td><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('https://el-dorado.stream.laut.fm/el-dorado')">Radio El Dorado
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://111.223.51.7:8000/;stream/1/')">COOL fahrenheit
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://bb30.sonixcast.com:9764/;.mp3')">Asian Dream Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://hi5.streamingsoundtracks.com:80/;')">Streaming Sound Tracks
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://136.0.17.26:8000/;')">Radio Africa Online
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://195.154.217.103:8123/;')">Radio Mi Amigo Int'l
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://184.154.202.243:8282/stream')">Rtv Music
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://46.105.118.14:7550/;')">BeMyRadio Schlager
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://174.37.159.206:8118/;')">iRie Rockers
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://217.116.9.142:9131/96_autodj')">Flashback Alternatives
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://162.244.80.106:8108/;')">Tune Disney Radio
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('http://94.23.148.11:8130/;')">SRC FM
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('I-opRM8v0p8')"><w_>Johnny Cash</w_>
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('DibevdT56pQ')"><w_>Creedence Clearwater Revival</w_>
<br><input type=radio name="ir" class="ir" onclick="javascript:radio
  ('kW0Fy88ilEs')"><w_>Beatles: <i>White Album</i></w_>
</td>

<tr><td></td></tr></table>

<p><div align=center><audio id="internet_radio" controls style="width:85vw;height:45px"></audio>
<p><input type=text class="urlspec" id="ir_url"
  onclick="javascript:input_onclick('ir_url')" onblur="javascript:input_onblur('ir_url')">
<p><a href="#info">Info</a>&nbsp; | &nbsp;<a href="#news">News</a>&nbsp; | &nbsp;<a href="#free">Movies</a>
<p>

</div><div style="width: 90vw; height: 3vh"></div>

</body>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="http://reference.dashif.org/dash.js/v2.5.0/dist/dash.all.min.js"></script>
<script>

/////////////////////////
///// User Settings /////
/////////////////////////

//var invidious_url = "https://invidio.us";			// slow
//var invidious_url = "https://invidiou.sh";			// very slow and broken
//var invidious_url = "https://invidious.snopyta.org";		// livestream CORS error
//var invidious_url = "https://invidious.enkirton.net";		// good
//var invidious_url = "https://invidious.13ad.de";		// very slow and broken
//var invidious_url = "https://invidious.mastodon.host";	// very slow and broken
  var invidious_url = "https://invidious.nixnet.xyz";		// good
//var invidious_url = "https://invidious.drycat.fr";		// good but may be unreliable
//var invidious_url = "https://tube.poal.co";			// very slow and livestream broken
//var invidious_url = "https://vid.wxzm.sx";			// livestream broken
//var invidious_url = "https://yt.elukerio.org";		// livestream broken

var list_1 = [
    ":NOZKLtIIUZE" , "Hitler Rant"
  , ":m_MaJDK3VNE" , "Herding Cats"
  , ":hTa1t_9HfFQ" , "Mike Hammer"
  , ":uaPKEbVypRQ" , "Typing Lesson"
  , ":0fDOdzY18XE" , "V - The Miniseries"
  , ":kJAsn_vJyY4" , "Starship Enterprise"
];

var list_2 = [
    ":We-HMZDSWFU" , "Me and You and a Dog Named Boo"
  , ":8Pa9x9fZBtY" , "Sultans of Swing"
  , ":6Ath-3JGk8M" , "Flashdance: What A Feeling"
  , ":onJspmvJr0E" , "Flashdance: Love's Theme"
  , ":FnV0LqHd3h8" , "Make America Great Again"
  , ":xB4iFysPm9Q" , "Karolina Protsenko"
];

var list_3 = [
    ":8sPWIrF0oSY" , "Jack Benny meets Perry Mason"
  , ":CGq8Ee2gOe4" , "DooM at QuakeCon"
  , ":5iV_hB08Uns" , "Boston Dynamics Robot"
  , ":0pKfxbCHLoU" , "AKB48: Sustainable"
  , ":rqU_gsBYdr0" , "Ajisai Al Ai Monogatani"
];

var list_4 = [
    "b:fmOZPrv27xs"  , "Dil Jaaniye"
  , "b:6wNFJIbTxNk"  , "Batla House"
  , "b:sSKnCoWAbDos" , "Brother Nathaniel"
  , "b:A7jZJfaEJK2p" , "Malice in the Palace"
];

var list_5 = [
    "v:129463420" , "Miniatur Wunderland"
  , "v:166403522" , "Some Kind of Quest"
  , "v:31883614"  , "Star Trek: Aurora"
  , "v:322694559" , "Great Martian War"
  , "v:175806163" , "Martian American"
];

var list_6 = [
    "i:5d4c9fd22ec69a001858eb60" , "Alex Jones"
  , "i:5d4a339571d8e00017f8afaf" , "Owen Shroyer"
  , "i:5d4c54aae936660017aee3c0" , "Kaitlin Bennett"
];

var list_7 = [
    "e:*5813257309001" , "Star Trek: Kitumba"
];

var list_8 = [
];

var list_9 = [
];

var news_1 = [
];

var news_2 = [
];

var news_3 = [
];

var news_4 = [
    "fox:6041387345001" , "Steve Hilton"
  , "fox:6035600008001" , "Judge Jeanine Pirro"
];

var news_5= [
    "pbs:3007398789" , "Nova: Bird Brain (2018) [region lock]"
  , "pbs:2365338020" , "Austin City Limits: 40 Years (2014)"
  , "pbs:1946795242" , "Frontline: WikiSecrets (2011)"
];

var news_6 = [
    "bbc:p035dt58" , "Dragonfly"
  , "bbc:p076m7sh" , "Desert Art"
  , "bbc:p07bj7pv" , "Follow the Food"
];

var news_7 = [
];

var news_8 = [
];

var news_9 = [
];

var free_1 = [
    "a:" , "majic-100-7483"
  , "a:" , "chum-1045-6270"
  , "a:" , "iheartradio-top-20-7556"
  , "a:" , "the-hit-mix-7553"
  , "a:" , "z1035-7757"
  , "a:" , "canadian-rock-7552"
  , "a:" , "971-the-eagle-2241"
  , "a:" , "heavy-rock-7554"
  , "a:" , "z100-1469"
  , "a:" , "1027-kiis-fm-los-angeles-185"
  , "a:" , "y100-561"
  , "a:" , "1017-the-bull-6586"
  , "a:" , "1035-kiss-fm-849"
  , "a:" , "alt-987-los-angeles-201"
  , "a:" , "1035-ktu-1473"
  , "a:" , "1067-lite-fm-1477"
  , "a:" , "smooth-jazz-4242"
  , "a:" , "the-vinyl-experience-6878"
  , "a:" , "iheart80s-radio-5060"
  , "a:" , "lone-star-925-3379"
  , "a:" , "q1043-1465"
  , "b:clubzone"  , "Virtual DJ: ClubZone"
  , "b:thegrind"  , "Virtual DJ: TheGrind"
  , "b:hypnotica" , "Virtual DJ: Hypnotica"
  , "b:powerbase" , "Virtual DJ: PowerBase"
];

var free_2 = [
    "7:https://www.djing.com/tv/animation.m3u8"			, "DJing: Animation"
  , "7:https://www.djing.com/tv/classics.m3u8"			, "DJing: Classics"  
  , "7:https://www.djing.com/tv/dancefloor.m3u8"		, "DJing: Dance Floor"
  , "7:https://www.djing.com/tv/session_electro-rock.m3u8"	, "DJing: Electro Rock"
  , "7:https://www.djing.com/tv/session_french-touch.m3u8"	, "DJing: French Touch"
  , "7:https://www.djing.com/tv/session_hedonist.m3u8"		, "DJing: Hedonist"
  , "7:https://www.djing.com/tv/hits.m3u8"			, "DJing: Hits"
  , "7:https://www.djing.com/tv/karaoke.m3u8"			, "DJing: Karaoke"
  , "7:https://www.djing.com/tv/live.m3u8"			, "DJing: Live"
  , "7:https://www.djing.com/tv/session_summer-vibes.m3u8"	, "DJing: Summer Vibes"
  , "7:https://www.djing.com/tv/underground.m3u8"		, "DJing: Underground"
  , "0:okXmamW62FU"						, "Cat Music TV (Romania)"
  , "8:http://tv.ticosmedia.com:1935/COLOSAL/COLOSAL/playlist.m3u8" , "Colosal TV (Costa Rica)"
  , "8:https://radio.congoplanet.com/Congo_Planet_TV.sdp/Congo_Planet_TV/playlist.m3u8" , "Congo Planet TV"
  , "8:https://vcndstv.teleosmedia.com/stream/dstv/dstv/playlist.m3u8" , "DanceStar TV"
  , "7:http://edge.music-choice-play-chaina1.top.comcast.net/PlayMetadataInserter/play/chunklist.m3u8" , "Music Choice (540p)"
  , "7:https://nancy-webtv.vedge.infomaniak.com/livecast/nancy-webtv/playlist.m3u8" , "Nancy Web TV (France, 394p)"
  , "8:http://wms.shared.streamshow.it/canale51/canale51/playlist.m3u8" , "Radio 51 (Italy)"
  , "8:http://m2otv-lh.akamaihd.net/i/m2oTv_1@186074/master.m3u8" , "Radio m2o (Italy)"
  , "0:UX1cdPqW5M8"						, "Shuffle Dance Music"
  , "8:http://live.stranafm.cdnvideo.ru/stranafm/smil:stranafm.smil/playlist.m3u8" , "Strana FM (Russia)"
];

var free_3 = [
    "8:http://live.field59.com/wwsb/ngrp:wwsb1_all/playlist.m3u8" , "ABC"
  , "1:amc-live-stream"			, "AMC"
  , "8:https://liveprodeuwest.global.ssl.fastly.net/btv/desktop/eu_live.m3u8" , "Bloomberg EU"
  , "8:https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_live.m3u8" , "Bloomberg US"
  , "/1/2/0 1:watch-cbs-live-stream 8:http://190.80.3.28/CBS/CBS.isml/index.m3u8" , "CBS ++"
  , "8:http://cbsnewshd-lh.akamaihd.net/i/CBSNHD_7@199302/master.m3u8" , "CBS News"
  , "/1/0/2 1:cnbclive 8:https://1161275585.rsc.cdn77.org/LS-ATL-54548-14/index.m3u8" , "CNBC +"
  , "/1/2/2 1:cnnlive 8:https://1674331492.rsc.cdn77.org/LS-ATL-54548-9/index.m3u8" , "CNN US +"
  , "8:http://ott-cdn.ucom.am/s27/index.m3u8" , "CNN International"
  , "/1/2/2 1:watch-fox-channel-live-stream 8:http://190.80.3.28/FOX/FOX.isml/index.m3u8" , "Fox ++"
  , "/1/0/2 1:foxbusinesslive 8:https://1329918864.rsc.cdn77.org/ls-54548-1/index.m3u8" , "Fox Business +"
  , "/1/2/2 1:foxnewslive 8:https://1161275585.rsc.cdn77.org/LS-ATL-54548-4/index.m3u8" , "Fox News +"
  , "1:fx-channel-live-stream"		, "FX"
  , "8:https://1161275585.rsc.cdn77.org/LS-ATL-54548-7/index.m3u8" , "HLN"
  , "/1/0/2 1:msnbclive 8:https://1674331492.rsc.cdn77.org/LS-ATL-54548-15/index.m3u8" , "MSNBC +"
  , "/1/2/2 1:watch-nbc-live-stream 8:http://190.80.3.28/NBC/NBC.isml/index.m3u8" , "NBC ++"
  , "/1/2/0 1:one-america-news-network 8:http://190.80.3.28/OAN/OAN.isml/index.m3u8" , "OAN +"
  , "1:pbs-live-stream"			, "PBS"
  , "/1/0/2 1:SyFy 8:http://185.246.209.109:8080/SYFY/index.m3u8" , "Syfy +"
  , "/1/0/2 1:tbs 8:http://185.246.209.109:8080/TBS/index.m3u8"	, "TBS +"
  , "1:the-cw-live-stream"		, "The CW"
  , "1:tnt"				, "TNT"
  , "2:usa-network-live"		, "USA Network"
  , "8:https://voa-lh.akamaihd.net/i/voa_mpls_tvmc6@320298/master.m3u8" , "Voice of America"
  , "2:we-tv"				, "We TV"
  , "8:https://weather-lh.akamaihd.net/i/twc_1@92006/master.m3u8" , "Weather Channel"
  , "8:http://cdnapi.kaltura.com/p/931702/sp/93170200/playManifest/entryId/1_oorxcge2/format/applehttp/protocol/http/uiConfId/28428751/a.m3u8" ,
    "WeatherNation TV"
  , "8:https://wgntribune-lh.akamaihd.net/i/WGNPrimary_1@304622/master.m3u8" , "WGN Tribune"
];

var free_4 = [
    "1:bravo"				, "Bravo TV"
  , "2:diy"				, "DIY Network"
  , "8:http://etlive-mediapackage-fastly.cbsaavideo.com/live/manifest.m3u8" , "ET Live"
  , "8:https://bozztv.com/36bay2/gin/giniko_fashionone_800kb_36bay2/index.m3u8" , "Fashion One"
  , "1:freeform"			, "Freeform"
  , "1:hgtv-live-stream"		, "HGTV"
  , "8:http://173.199.158.79:1935/roku/myStream/playlist.m3u8" , "Kool TV"
  , "8:http://hlsdpi-cdn-as3.totalstream.net/dpilive/miamitv/mia/miamitv1/playlist.m3u8" , "Miami TV"
  , "2:motortrend"			, "Motor Trend"
  , "8:https://bcsecurelivehls-i.akamaihd.net/hls/live/505785/5367332899001/master.m3u8" , "Pop TV"
  , "8:https://rbmn-live.akamaized.net/hls/live/590964/BoRB-AT/master.m3u8" , "Red Bull TV"
  , "8:https://content.uplynk.com/channel/1831163f97674328ad9f4b4814ed39c5.m3u8" , "TBD (Sinclair)"
  , "8:http://vcnxcorps.teleosmedia.com/stream/xcorps/xcorps/playlist.m3u8" , "Xcorps TV"
  , "1:espn"				, "ESPN"
  , "2:espn2"				, "ESPN 2"
  , "2:fox-sports-1"			, "Fox Sports 1"
  , "2:fox-sports-2"			, "Fox Sports 2"
  , "2:golf-channel-live-free"		, "Golf Channel"
  , "7:http://mlblive-akc.mlb.com/ls01/mlbam/mlb_network/NETWORK_LINEAR_1/master_wired.m3u8" , "MLB Network (all-p)"
  , "2:nba-tv"				, "NBA TV"
  , "2:nbc-sports"			, "NBC Sports"
  , "2:nfl-network-live-free"		, "NFL Network"
  , "2:tennis-channel-live-free"	, "Tennis Channel"
];

var free_5 = [
    "1:ae-live-stream"			, "A&E - Arts & Entertainment"
  , "1:animal-planet"			, "Animal Planet"
  , "1:cartoon-network"			, "Cartoon Network"
  , "8:https://classicarts.global.ssl.fastly.net/live/cas/master.m3u8" , "Classic Arts Showcase"
  , "1:comedy-central"			, "Comedy Central"
  , "2:destination-america"		, "Destination America"
  , "1:discovery-channel-live-stream"	, "Discovery Channel"
  , "1:disney-channel"			, "Disney Channel"
  , "8:https://cinedigm.vo.llnwd.net/conssui/amagi_hls_data_xumo1234A-docuramaA/CDN/master.m3u8" , "Docurama Channel"
  , "1:hallmark-movies-mysteries"	, "Hallmark Movies & Mysteries"
  , "1:hbo"				, "HBO - Home Box Office"
  , "1:history-channel-live-stream"	, "History Channel"
  , "1:investigation-discovery"		, "Investigation Discovery"
  , "2:lifetime-movies"			, "Lifetime Movies"
  , "1:national-geographic-live-stream"	, "National Geographic"
  , "1:nickelodeon"			, "Nickelodeon"
  , "2:oxygen"				, "Oxygen"
  , "2:science"				, "Science Channel"
  , "1:showtime"			, "Showtime"
  , "1:starz"				, "Starz"
  , "2:sundance-tv"			, "Sundance TV"
  , "1:turner-classic-movies"		, "TCM - Turner Classic Movies"
  , "1:travel-channel"			, "Travel Channel"
];

var free_6 = [
    "5:bbcone_hi"	, "BBC 1 (360p)"
  , "5:bbctwo_hi"	, "BBC 2 (360p)"
  , "5:bbcfour_hi"	, "BBC 4 (360p)"
  , "5:channel4_hi"	, "Channel 4 (360p)"
  , "5:channel5_hi"	, "Channel 5 (360p)"
  , "5:itv_hi"		, "ITV 1 (360p)"
  , "5:itv2_hi"		, "ITV 2 (360p)"
  , "5:itv3_hi"		, "ITV 3 (360p)"
  , "5:itv4_hi"		, "ITV 4 (360p)"
  , "0:siyW0GOBtbo"	, "Sky News UK"
  , "8:https://stream.skynewsarabia.com/hls/sna.m3u8" , "Sky News Arabia"
  , "8:http://live.alsace20.fr/live/alsace20/ngrp:alsace20_all/playlist.m3u8" , "Alsace 20 (France)"
  , "8:http://mv2.tvfrancophonie.org/live/Stream1/index.m3u8" , "TV Francophonie (France)"
  , "8:http://streamcast.oc3n.net:1935/TVPI/myStream700.sdp/live.m3u8" , "TVPI (France)"
  , "0:0fKyrdQ15gs"	, "France 24 - English"
  , "0:dxekoD1b3_o"	, "France 24 - French"
  , "0:L2NLsrUMgeE"	, "France 24 - Arabic"
  , "8:https://abc-iview-mediapackagestreams-1.akamaized.net/out/v1/50345bf35f664739912f0b255c172ae9/index.m3u8" ,
    "ABC News (Australia)"
  , "8:https://glblvestu-f.akamaihd.net/i/glblvestu_1@78149/master.m3u8" , "Global (Canada)"
  , "8:https://glblvestu-f.akamaihd.net/i/glblvPSTu_1@80128/master.m3u8" , "Global News"
  , "8:https://1161275585.rsc.cdn77.org/LS-ATL-54548-8/index.m3u8" , "CBC News Network"
  , "7:https://cbclivedai5-i.akamaihd.net/hls/live/567235/event2/CBOT/master1.m3u8" , "CBOT (Ottawa, 540p)"
  , "8:http://1-fss-fso35.streamhoster.com/lv_ntv/_definst_/broadcast1/playlist.m3u8" , "Newfoundland TV"
];

var free_7 = [
    "8:https://rt-news-gd.secure2.footprint.net/1103.m3u8" , "RT News"
  , "8:https://rt-doc-gd.secure2.footprint.net/1101.m3u8"  , "RT Documentary" 
  , "8:https://live2.presstv.com/liveprs/smil:liveprs.smil/playlist.m3u8" , "Press TV"
  , "8:http://aljazeera-eng-hd-live.hls.adaptive.level3.net/aljazeera/english2/index.m3u8" , "Al Jazeera"
  , "8:https://api.trtworld.com/livestream/v1/WcM3Oa2LHD9iUjWDSRUI335NkMWVTUV351H56dqC/master.m3u8" , "TRT World"
  , "8:https://nmxlive.akamaized.net/hls/live/529965/Live_1/index.m3u8" , "NewsMax TV"
  , "8:https://edge.free-speech-tv-live.top.comcast.net/out/u/fstv.m3u8" , "Free Speech TV"
  , "8:https://infostream.secure.footprint.net/hls-live/infostream-infostream/_definst_/live.m3u8" , "InfoWars Live"
  , "8:https://infostream.secure.footprint.net/hls-live/infostream2-infostream2/_definst_/live.m3u8" , "InfoWars 2"
  , "8:https://infostream.secure.footprint.net/hls-live/infostream3-infostream3/_definst_/live.m3u8" , "InfoWars 3"
  , "7:https://skystreams-lh.akamaihd.net/i/SkyC1_1@500806/master.m3u8" , "C-SPAN 1 (108p)"
  , "7:https://skystreams-lh.akamaihd.net/i/SkyC2_1@500807/master.m3u8" , "C-SPAN 2 (108p)"
  , "7:https://skystreams-lh.akamaihd.net/i/SkyC3_1@500808/master.m3u8" , "C-SPAN 3 (108p)"
  , "8:https://bcsecurelivehls-i.akamaihd.net/hls/live/680602/1242843915001_1/master.m3u8" , "CPAC - English"
  , "8:https://bcsecurelivehls-i.akamaihd.net/hls/live/680604/1242843915001_3/master.m3u8" , "CPAC - French"
  , "8:https://bcsecurelivehls-i.akamaihd.net/hls/live/680603/1242843915001_2/master.m3u8" , "CPAC - Bilingual"
  , "8:https://w1.013.gostreaming.tv/Knesset/myStream/playlist.m3u8" , "Knesset Channel"
  , "8:https://bcliveunivsecure-lh.akamaihd.net/i/un150_A1_1@575439/master.m3u8" , "UN Web TV"
  , "0:21X5lGlDOfg" , "NASA Official"
  , "0:nA9UZF-SZoQ" , "NASA Media"
];

var free_8 = [
    "8:https://nhkworld.webcdn.stream.ne.jp/www11/nhkworld-tv/global/263941/live_wa_s.m3u8" , "NHK World Japan"
  , "8:http://ebsonair.ebs.co.kr:1935/ebs2familypc/familypc1m/index.m3u8" , "EBS-2 (South Korea)"
  , "9:https://www.rthk.hk/feeds/dtt/rthktv32_https.m3u8" , "RTHK-32 (Hong Kong)"
  , "0:osAUnmbCDfY" 		, "Kompas TV (Indonesia)"
  , "8:http://thaipbs-live.cdn.byteark.com/live/playlist.m3u8" , "Thai PBS (Thailand)"
  , "0:vCDDYb_M2B4" 		, "CCTV-4 (China)"
  , "7:https://live.ntdimg.com/live400/playlist.m3u8" , "NTD (US-Chinese, 480p)"
  , "8:http://103.14.38.107:1935/live/mnb.stream/playlist.m3u8" , "MNB (Mongolia)"
  , "8:http://kazakhtvru.ultraiptv.com/live_ru/playlist.m3u8" , "Kazakh TV (Kazakhstan)"
  , "8:http://dmisxthvll.cdn.mangomolo.com/dubaitv/smil:dubaitv.stream.smil/playlist.m3u8" , "Dubai TV (UAE)"
  , "8:https://trtcanlitv-lh.akamaihd.net/i/TRTTURK_1@182144/master.m3u8" , "TRT Turk (Turkey)"
  , "8:https://bozztv.com/36bay2/gin/giniko_armenia1tv_800kb_36bay2/index.m3u8" , "Public TV Armenia"
  , "0:NzLwtZGtHEc"		, "Channel 5 (Russia)"
  , "8:https://bozztv.com/36bay2/gin/giniko_karapuztv_3000kb_36bay2/index.m3u8" , "Karapuz TV (Russia)"
  , "0:XWwW1l_Ciwk" 		, "NTV (Russia)"
  , "0:S6S63aAZBVc" 		, "Lubelska TV (Poland)"
  , "8:https://nn.geo.joj.sk/live/jojplus-index.m3u8" , "JOJ Plus (Slovakia)"
  , "8:https://b2everyrai-lh.akamaihd.net/i/rai5_1@182695/master.m3u8" , "Rai-5 (Italy)"
  , "8:https://b2everyrai-lh.akamaihd.net/i/raigulp_1@66350/master.m3u8" , "Rai-Gulp (Italy)"
  , "8:https://cdnamd-hls-globecast.akamaized.net/live/ramdisk/al_aoula_inter/hls_snrt/al_aoula_inter.m3u8" ,
    "Al Aoula (Morocco)"
  , "7:https://1085640928.rsc.cdn77.org/LS-PRG-54958-test/tracks-v1a1/mono.m3u8" , "NBS (Uganda, 432p)"
  , "7:https://558bd16067b67.streamlock.net/nos_pais_24_7/smil:livestream.stream.smil/playlist.m3u8" ,
    "Nos Pais (Curacao, 360/720p)"
  , "8:https://mdstrm.com/live-stream-playlist/57d01d6c28b263eb73b59a5a.m3u8" , "Canal Capital (Colombia)"
  , "8:https://mdstrm.com/live-stream-playlist/5a7b1e63a8da282c34d65445.m3u8" , "Multimedios Costa Rica"
  , "0:nnczzMvDORw" 		, "Canal 4 Guadalajara (Mexico)"
  , "8:http://streamingcws20.com:1935/lobodurango/videolobodurango/playlist.m3u8" , "TV Lobo (Mexico)"
  , "2:telemundo"		, "Telemundo (US)"
  , "2:univision"		, "Univision (US)"
];

var free_9 = [
    "8:https://unlimited1-us.dps.live/atv/atv.smil/playlist.m3u8" , "Antofagasta TV (Chile)"
  , "8:http://panel.dattalive.com:1935/8250/8250/playlist.m3u8" , "Multivision Federal (Argentina)"
  , "8:https://v7.ciclano.io:1443/tvmar/tvmar/playlist.m3u8" , "TV Mar (Brazil)"
  , "8:https://d2ajt1gpdtnw25.cloudfront.net/mbliveMain/480p/playlist.m3u8" , "TeleSur (Venezuela)"
  , "8:https://bozztv.com/36bay2/gin/giniko_rts1_900kb_36bay2/index.m3u8" , "RTS-1 (Senegal)"
  , "7:https://www.enovativecdn.com:4433/rticdn/smil:rti1.smil/playlist.m3u8" , "RTI-1 (Ivory Coast, 360p)"
  , "7:https://www.enovativecdn.com:4433/rticdn/smil:rti2.smil/playlist.m3u8" , "RTI-2 (Ivory Coast, 360p)"
  , "8:http://185.105.4.193:1935/ravetv/myStream/playlist.m3u8" , "Rave TV (Nigeria)"
  , "0:qf-09Dn7Zow"		, "Orient TV (UAE)"
  , "7:http://85.132.81.184:8080/arbkepez/live/index.m3u8" , "Kepez TV (Azerbaijan, 540p)"
  , "8:https://bozztv.com/36bay2/gin/giniko_jordan_900kb_36bay2/index.m3u8" , "Jordan TV"
  , "7:https://roya-live.ercdn.net/roya/roya.m3u8" , "Roya TV (Jordan, all-p)"
  , "8:http://wms.shared.streamshow.it:1935/supertv/supertv/live.m3u8" , "Super TV (Italy)"
  , "8:https://cld03wz.tv2000.it/tv2000_main.m3u8" , "TV 2000 (Italy)"
  , "8:http://unilivemtveu-lh.akamaihd.net/i/mtvno_1@346424/master.m3u8" , "MTV (Norway)"
  , "8:https://cdn.leviracloud.eu:11935/TTVLive/smil:ttvlivetest.smil/playlist.m3u8" , "Tallinna TV (Estonia)"
  , "8:http://live-echotv.cdnvideo.ru/echotv/echotv.sdp/playlist.m3u8" , "Echo TV (Russia)"
  , "8:http://hls.mirtv.cdnvideo.ru/mirtv-parampublish/mirtv3_2500/playlist.m3u8" , "Mir TV (Russia)"
  , "7:http://alpha.tv.online.tm/hls/ch007_720/index.m3u8" , "Turkmenistan TV (406p)"
  , "8:https://bozztv.com/36bay2/gin/giniko_angeltv_900kb_36bay2/index.m3u8" , "Angel TV (India)"
  , "9:https://www.rthk.hk/feeds/dtt/rthktv31_https.m3u8" , "RTHK-31 (Hong Kong)"
];

/*

  , "8:https://abclive2-lh.akamaihd.net/i/abc_live11@423404/master.m3u8" , "ABC News [down]"
  , "8:https://v3.ciclano.io:1443/tvjapi/_definst_/tvjapi/playlist.m3u8" , "TV Japi (Brazil)"
  , "7:http://cnhls.ntdtv.com/cn/live400/playlist.m3u8" , "NTD (US-Chinese, 360p)"
  , "8:https://lakay.haitilive.net/lakaylive/tchhaiti/index.m3u8" , "Tl Conscience Haitienne (480p)"
  , "0:IV6SXSvUdbs" , "PTV (Philippines)"
  , "8:https://prodvizhenie.bonus-tv.ru/cdn/prodvizhenie/index.m3u8" , "Prodvizhenie (Russia)"
  , "7:https://prodvizhenie.bonus-tv.ru/cdn/prodvizhenie/tracks-v1a1/mono.m3u8" , "STS Live (Russia, 576p)"
  , "8:https://tvchannelstream1.tvzvezda.ru/cdn/tvzvezda/playlist.m3u8" , "Zvezda TV (Russia)"
  , "8:https://1004910551.rsc.cdn77.org/LS-PRG-44514-1/index.m3u8" , "RTV (Rwanda)"
  , "0:vDyIq-wZjkY" , "Wow TV (South Korea)"
  , "8:http://38.99.146.36:7777/ADAlOula_HD.m3u8" , "Abu Dhabi Al Oula (UAE, 720p)"
  , "0:nvGDS3JwTww" , "Black Sea TV (Ukraine)"

  , "9:https://strm.yandex.ru/kal/rmbox/rmbox0.m3u8" , "Russian Music Box" -- needs CORS unblocker
  , "9:http://wms.brtk.net:1935/live/BRTHD/playlist.m3u8" , "BRT 1 (Cyprus, 576p)" -- needs CORS unblocker

http://ott-cdn.ucom.am/s1/index.m3u8  public tv armenia
http://ott-cdn.ucom.am/s30/s01.m3u8  ftv.com
http://ott-cdn.ucom.am/s34/s01.m3u8  bridge tv

Thu9v427o28  Canal 9 Television Riojana (Argentina)
Thu9v427o28  Canal 27 (Guatemala)
http://ios.cdn.bg:2006/fls/bonair.stream/playlist.m3u8  Diema 2 (Bulgaria)
https://news.cgtn.com/resource/live/document/cgtn-doc.m3u8  CGTN Documentary (China)
http://ecuastreamhd.com:1935/UCSGHQ/UCSGHQ/playlist.m3u8  UCSG Television (Ecuador)
-JTz9esDrnM  Nil News (Egypt)
http://cdn.elsalvadordigital.com:1935/canal23/canal23/playlist.m3u8  Canal 33 (El Salvador)
https://lakay.haitilive.net/app/tvlakay/tele6univers/index.m3u8  Tl 6 Univers
https://vidcdn.vidgyor.com/at-origin/liveabr/playlist.m3u8  Aaj Tak TV (India)
H4hcSDIevlY marina eye on kuwait
Nr2-XgAgV80  XHCDM (Mexico)
http://online.tvm.co.mz:1935/live/smil:Channel1.smil/playlist.m3u8  TVM (Mozambique)
https://rrr.sz.xlcdn.com/?account=nhnieuws&file=live&type=live&service=wowza&protocol=https&output=playlist.m3u8  TV Noord-Holland (Netherlands)
https://d5ms27yy6exnf.cloudfront.net/live/omroepflevoland/tv/index.m3u8  Omroep Brabant (Netherlands)
http://45.55.127.106/live/unicanal.m3u8  Unicanal (Paraguay)
http://174.138.118.252/live/canal13stream.m3u8  Canal 13 (Paraguay)
https://nn.geo.joj.sk/live/joj-index.m3u8  JOJ (Slovakia)
https://hlsliveamdgl8-lh.akamaihd.net/i/hlsdvrlive_1@583030/master.m3u8  Canal 24H (Spain)
http://rmtv24hweblive-lh.akamaihd.net/i/rmtv24hwebes_1@300661/master.m3u8  Teledeporte (Spain)
yk2CUjbyyQY   TTV News Taiwan
http://138.68.138.119:8080/low/5a8993709ea19/index.m3u8  Al Itrah Broadcasting Network Television IBN TV (Tanzania)
http://rtsp.cdn.ua/tv5.zp.ua_live/_definst_/mp4:tv5/playlist.m3u8  TVI (Ukraine)
3e0FsU1N6OQ  UNT (Ukraine)
L5r4do_eLwk  VPI TV (Venezuela)

https://cdn-01.bonus-tv.ru:8090/prosveschenie_edge/index.m3u8  Prosvechcheniye (Russia)
https://360tv-cdn.facecast.io/360/channel1/index.m3u8  360 Channel 1 (Russia)PodMoscoviye
8T9SFZDP60Q  RTR Vesti (Russia)
https://hls-rictv.cdnvideo.ru/rictv/rictv.sdp/playlist.m3u8  Sinergia TV (Russia)
http://cdn.vsnw.net:8081/interradio/720i.m3u8  SR TV (Russia)
http://tnv.bonus-tv.ru/cdn/tnvplanet/index.m3u8  TNV (Russia)
http://stream.tvbelgorod.ru:8080/mirbelogorya/index.m3u8  TUT TV (Russia)
https://live-nikatv.cdnvideo.ru/nikatv/nikatv.sdp/playlist.m3u8  TV Yaroslavl
http://194.190.88.34:1935/videowhisper/47channel_live_broadcast.stream/playlist.m3u8  TVM
http://live.ugratv.cdnvideo.ru/ugratv/smil:ugrastream1.smil/playlist.m3u8  Ugra TV
http://stream.studio360.tv/nw/nw_576p/playlist.m3u8  VKT

https://rbmn-live.akamaized.net/hls/live/622817/BoRB-US/master.m3u8 Red Bull
http://aljazeera-doc-apple-live.adaptive.level3.net/apple/aljazeera/hq-doc/800kStream.m3u8
https://rt-usa.secure.footprint.net/1105.m3u8
http://rthklive2-lh.akamaihd.net/i/rthk32_1@168450/master.m3u8  RTHK 32
https://glblvhalifax-lh.akamaihd.net/i/glblvHalifax_1@119843/master.m3u8  Global Halifax
"/1/2/2 1:watch-abc-live-stream 8:http://190.80.3.28/ABC/ABC.isml/index.m3u8" , "ABC ++"
https://cbsn-us-cedexis.cbsnstream.cbsnews.com/out/v1/55a8648e8f134e82a470f83d562deeca/master.m3u8
https://invidio.us/watch?v=4993sBLAzGA  Earth Views 2
http://iphone-streaming.ustream.tv/uhls/6540154/streams/live/iphone/playlist.m3u8  Nasa official
https://api.trtworld.com/livestream/v1/WcM3Oa2LHD9iUjWDSRUI335NkMWVTUV351H56dqC/master.m3u8

*/

/////////////////////////////
///// End User Settings /////
/////////////////////////////

var head = "<!DOCTYPE html><html><head><meta charset='utf-8'>" +
           "<title>Downloader</title></head><body><h2>Downloader</h2>";

var tail = "</body></html>", download_doc = head + tail;

var last_h = last_w = last_raw = last_time = busy = the_time = 0;
var cors_bypass = error = "", vidwin = null, freetv = new Array ();
var hls_obj = new Array (10), dash_obj = new Array (10);

var clear_all = function ()
{
  var win; ir_action (0);
  // destroy iframes so browser won't try to reload them on page refresh
  win = document.getElementById ("mov5"); win.parentNode.removeChild (win);
  win = document.getElementById ("mov6"); win.parentNode.removeChild (win);
  win = document.getElementById ("mov7"); win.parentNode.removeChild (win);
}

var copylist = function (frame, num)
{
  var name, list, box, val, txt, i, j; if (!num) return;

  if (num < 10)
  {
    name = "video";
    if (num == 1) list = list_1; else
    if (num == 2) list = list_2; else
    if (num == 3) list = list_3; else
    if (num == 4) list = list_4; else
    if (num == 5) list = list_5; else
    if (num == 6) list = list_6; else
    if (num == 7) list = list_7; else
    if (num == 8) list = list_8; else
    if (num == 9) list = list_9; else return;
  }
  else if (num < 20)
  {
    name = "video"; num -= 10;
    if (num == 1) list = news_1; else
    if (num == 2) list = news_2; else
    if (num == 3) list = news_3; else
    if (num == 4) list = news_4; else
    if (num == 5) list = news_5; else
    if (num == 6) list = news_6; else
    if (num == 7) list = news_7; else
    if (num == 8) list = news_8; else
    if (num == 9) list = news_9; else return;
  }
  else if (num < 30)
  {
    name = "station"; num -= 20;
    if (num == 1) list = free_1; else
    if (num == 2) list = free_2; else
    if (num == 3) list = free_3; else
    if (num == 4) list = free_4; else
    if (num == 5) list = free_5; else
    if (num == 6) list = free_6; else
    if (num == 7) list = free_7; else
    if (num == 8) list = free_8; else
    if (num == 9) list = free_9; else return;
  }

  box = document.getElementById ("stk" + frame);

  for (i = box.length - 1; i > 0; i--) box.remove (i);

  for (i = 0, j = 1; i < list.length; i += 2, j++)
  {
    val = list [i]; txt = list [i+1]; if (val == "") val = txt;
    if (val.substr (val.length - 1, 1) == ":") val = val + txt;
    box.options[j] = new Option ("[" + (j < 10 ? "0" : "") + j + "] " + txt, val);
  }

  list = document.getElementById ("stk" + frame + "-" + num).innerText;
  box.options[0].innerText = "Select a " + name + " (" + list + ")";
  box.selectedIndex = 0;
  popper (frame, 0);
}
////////////////////

var hidelist = function (frame)
{
  document.getElementById ("stk" + frame).selectedIndex = 0;
}
////////////////////

var toggle_hls = function (frame, state)
{
  if (state < 0) return;

  var doc = document.getElementById ("hls" + frame);
  var hls = doc.checked; if (hls == undefined) hls = 0;

  var txt = "Wrapper"; if (++hls > 2) hls = 0; if (state > 0) hls = state - 1;
  if (hls == 1) txt = "M3U8"; else if (hls == 2) txt = "DASH";

  doc.checked = hls; doc.innerHTML = txt;

  if (!state) document.getElementById ("mov" + frame + "b").checked = true;
}

var buttonpress = function (frame, num)
{
  var id1, id2, doc1, doc2, chk, txt;

  id1 = "btn" + frame + "a"; id2 = "btn" + frame + "b";

  doc1 = document.getElementById (num ? id2 : id1);
  doc2 = document.getElementById (num ? id1 : id2);

  chk = doc1.checked; doc1.checked = !chk;
  doc1.className = (chk ? "is_off" : "is_on");
  doc2.checked = false; doc2.className = "is_off";
}
////////////////////

var urlcopy = function (frame)
{
  if (!document.getElementById ("mov" + frame + "m").checked)
  {
    document.getElementById ("line" + frame).select();
    document.execCommand ("copy"); return;
  }
  popper (frame, 1);
}
////////////////////

var input_onclick = function (id)
{
  var doc = document.getElementById (id);
  if (!doc.checked && doc.selectionStart == doc.selectionEnd) doc.select();
  doc.checked = true;
}
////////////////////

var input_onblur = function (id)
{
  document.getElementById (id).checked = false;
}
////////////////////

var is_busy = function (frame)
{
  if (busy) return 1;
  document.getElementById ("vid" + frame).innerHTML = "Busy";
  busy = 1; error = ""; return 0;
}
////////////////////

var no_fail = function (frame)
{
  if (busy) toggle_hls (frame, busy); else
  {
    document.getElementById ("vid" + frame).innerHTML = "Error";
    if (error != "") document.getElementById ("id" + frame).value = "err: " + error;
  }
  var Busy = busy; busy = 0; return (Busy);
}
////////////////////

var stream_all = function (frame, type)
{
  if (busy) busy = type + 1;
  if (type < 2) return (!document.getElementById ("mov" + frame + "f").checked);
  return 1;
}
////////////////////

var reset_frame = function (frame)
{
  if (!busy) { clear_video (frame); ir_action (-1); }
}
////////////////////

var clear_video = function (frame)
{
  loadwindow ("", frame, ""); popper (frame, 2);
}
////////////////////

var get_time = function ()
{
  the_time = Date.now() / 500; return (the_time);
}

////////////////////////////////
///// INFO + ENTERTAINMENT /////
////////////////////////////////

var loadid = function (frame, mode)
{
  var url, fmt, doc, sub, src;

  clear_video (frame);

  if (mode == 1)
  {
    url = document.getElementById ("line" + frame).value;
    url = url.replace (/\\/g, "");
    if (!busy && url != "") loadwindow (url, frame, "");
    return;
  }

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  url = document.getElementById ("stk" + frame).value;
  if (!url) url = document.getElementById ("id" + frame).value;

  if (mode == 2) url = error;

  src = document.getElementById ("src" + frame).value;
  sub = url.split (": ");

  if (sub.length > 1) url = sub [sub.length - 1]; else
  {
    sub = url.split (":"); doc = sub [0];
    if (sub.length > 1 && doc.length < 4)
    {
      src = 0; url = sub [sub.length - 1];

      if (doc == "b") src = 1;
      if (doc == "v") src = 2;
      if (doc == "i") src = 3;
      if (doc == "e") src = 4;
      if (doc == "d") src = 5;
      if (doc == "n") src = 7;

      doc = document.getElementById ("src" + frame);
      if (doc.value != src) for (mode = 0; mode < doc.length; mode++)
        if (doc.options [mode].value == src) { doc.selectedIndex = mode; break; }
    }
  }      
  if (url == "") return;

  if (src == 1  && (url = getid (url,-12))) req_bitchute (url, frame, fmt); else
  if (src == 2  && (url = getid (url, -9))) req_vimeo (url, frame, fmt); else
  if (src == 3  && (url = getid (url, 24))) req_infowars (url, frame, fmt); else
  if (src == 11 && (url = getid (url, 12))) req_153news (url, frame, fmt); else
  if (src == 13 && (url = getid (url,-16))) req_liveleak (url, frame, fmt); else
  if (src == 4  && (url = getid (url,  0))) req_brighteon (url, frame, fmt); else
  if (src == 5  && (url = getid (url, -7))) req_dailymotion (url, frame, fmt); else
  if (src == 9  && (url = getid (url,  6))) req_mrctv (url, frame, fmt); else
  if (src == 7  && (url = getid (url, 10))) req_natfilmbrd (url, frame, fmt); else
  if (src == 25 && (url = getid (url,  8))) req_jwplayer (url, frame, fmt); else
  if (src == 24 && (url = getid (url, -9))) req_soundcloud (url, frame, fmt); else
  if (src == 21 && (url = getid (url, 19))) req_twitter (url, frame, fmt); else

  if (src == 20) load_brightcove ("", url, "", frame, fmt); else

  if (src == 0  && (url = getid (url, 11))) request (url, frame, fmt);

  else document.getElementById ("id" + frame).value = (url ? "Not supported" : "Invalid ID");
}
////////////////////

var getid = function (url, len)
{
  if (!len) return (url);

  var tst = url.substr (-1);
  if (tst == "/") url = url.substr (0, url.length - 1);

  tst = url.substr (url.length - 5, 5); tst = tst.search ("\\.");
  if (tst >= 0) url = url.substr (0, url.length + tst - 5);

  if ((tst = url.search ("\\*")) >= 0) return (url.substr (tst+1));
  if (!len) return (url);

  if (len < 0)
  {
    len = -len;
    if (url.length < len - 2) return "";
    if (url.length == len - 2) return url;
    if (url.length == len - 1) return url;
    if (url.length == len) return url;

    url = url.substr (url.length - len, len);
    if ((len = url.search ("/")) > 1) url = "";
    if (len < 0 && (len = url.search ("=")) > 1) url = "";
    if (len < 0 && (len = url.search ("-")) > 1) url = "";

    if (len >= 0) url = url.substr (len + 1);
    return url;
  }

  if (url.length < len) return "";
  if (url.length == len) return url;

  url = url.substr (url.length - len, len);
  if (url.search ("/") >= 0) url = "";
  if (url.search ("=") >= 0) url = "";
  return url;
}
////////////////////

var request = function (id, frame, fmt)
{
//  if (document.getElementById ("mov" + frame + "f").checked)
    request_invidious (id, frame, fmt); // else request_youtube (id, frame, fmt);
}

const request_invidious = async (id, frame, fmt) =>
{
  var i, j, n, f = [0,0,0,0,0,0,0,0];

  var tag = "invidious"; if (is_busy (frame)) return;
  var url = "https://www.youtube.com/embed/" + id;
  if (fmt < 0) { fmt = -fmt; tag = ""; }  // this is Internet TV
    else document.getElementById ("id" + frame).value = tag + " (ID)";

if (tag && document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  url = invidious_url + "/api/v1/videos/" + id + "?fields=formatStreams,hlsUrl";

  var response = await fetch (url);
  var jsonData = await response.json();

  var sub = jsonData.formatStreams; n = sub.length;

  for (i = 0; i < n; i++)
  {
    if ((j = argformat (sub[i].itag)) >= 0) f[j] = i + 1;
  }
    
  if ((n = getformat (f, fmt)))
  {
    fmt = n; fixformat (f, frame); n = f[argformat(n)] - 1;
    url = (sub[n].url.search ("&gcr=") > 0) ? "local=true&" : "";  // geo-restricted?
    url = invidious_url + "/latest_version?" + url + "itag=" + fmt + "&id=" + id;
  }
  else   // live stream
  {
    url = jsonData.hlsUrl; if (!url) throw ("!!!");
    if (url.substr (0,1) == "/") url = invidious_url + url;
    sub = url = url + "?local=true";

    if (stream_all (frame, 1)) fmt = 0; else
    {
      response = await fetch (url);
      textData = await response.text();

      url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }

    if (!tag) freetv.push ({'name':id, 'time':the_time, 'path':sub});
  }

} catch (err) { console.log (err); busy = 0; }

 if (tag) tag = tag + " [" + fmt + "]: " + id; else
   { id = ""; tag = "Internet TV [" + fmt + "]"; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag);
}
////////////////////
/*
const request_youtube = async (id, frame, fmt) =>
{
  var i, j, n, s, f = [0,0,0,0,0,0,0,0];

  var tag = "youtube"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://www.youtube.com/get_video_info?el=embedded&video_id=" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var sub = textData.split ("url%3D");
  if (sub.length < 2) sub = textData.split ("url%22%3A%22");
  if (sub.length < 2) throw ("!!!");

  for (i = 1; i < sub.length; i++)
  {
    url = sub [i]; s = "itag%3D"; n = url.search (s);
    if (n < 0) { s = "itag%253D"; n = url.search (s); }
    if (n < 0) continue;

    url = url.substr (n + s.length);
    url = url.substr (0, url.search ("%"));
    if ((j = argformat (url)) >= 0) f[j] = i;
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((n = argformat (fmt)) < 0 || !(n = f[n])) throw ("!!!");

  url = sub [n];
  url = url.replace (/%25/g, "%");
  url = url.replace (/%5Cu0026/g, "&");
  url = decodeURIComponent (url);
  if ((n = url.search ('"')) > 0) url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
*/
////////////////////
/*
const request_youtube_old = async (id, frame, fmt) =>
{
  var i, j, s, f = [0,0,0,0,0,0,0,0];

  var tag = "youtube"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://www.youtube.com/get_video_info?el=embedded&video_id=" + id;
//  if (id.length > 12) { tag = "google"; url = "https://drive.google.com/get_video_info?docid=" + id; }
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var sub = textData.split ("url%3D");
  if (sub.length < 2) throw ("!!!");

  for (i = 1; i < sub.length; i++)
  {
    url = sub [i];
    url = url.substr (url.search ("itag%253D") + 9);
    url = url.substr (0, url.search ("%"));
    if ((j = argformat (url)) >= 0) f[j] = i;
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((n = argformat (fmt)) < 0 || !(n = f[n])) throw ("!!!");

  url = sub [n];
  n = url.search ("&"); if (n > 0) url = url.substr (0, n);
  n = url.search ("%26"); if (n > 0) url = url.substr (0, n);
  url = url.replace (/%25/g, "%");
  url = decodeURIComponent (url);
  n = url.search (","); if (n > 0) url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
*/
////////////////////

const req_bitchute = async (id, frame, fmt) =>
{
  var tag = "bitchute"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://www.bitchute.com/video/" + id + "/";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search ('"'));

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_vimeo = async (id, frame, fmt) =>
{
  var i, j, k, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  var tag = "vimeo"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://player.vimeo.com/video/" + id + "/config";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var jsonData = await response.json();

  if (jsonData.request == undefined)   // privacy lock, go long way around
  {
    response = await fetch (cors_bypass + "https://vimeo.com/" + id);
    jsonData = await response.text();

    var s = '"config_url":"';
    var n = jsonData.search (s); if (n < 0) throw ("!!!");

    url = jsonData.substr (n + s.length, 500);
    url = url.substr (0, url.search ('"'));
    url = url.replace (/\\/g, "");

    response = await fetch (cors_bypass + url);
    jsonData = await response.json();
  }

  url = jsonData.request.files.progressive;
  
  for (i = 0; i < url.length; i++)
  {
    k = url[i].quality; k = k.substr (0, k.search ("p"));

    if ((j = chkformat (k)) >= 0) if (r[j] < k) { f[j] = i + 1; r[j] = k; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0 || (j = f[j] - 1) < 0) throw ("!!!");

  fmt = url[j].height; if ((url = url[j].url) == undefined) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_infowars = async (id, frame, fmt) =>
{
  var tag = "infowars"; if (is_busy (frame)) return;
  var url = "https://vod-api.infowars.com/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'downloadUrl="';
  var n = textData.search (s);

  if (n < 0) url = ""; else
  {
    url = textData.substr (n + s.length, 100);
    url = url.substr (0, url.search ('"'));
  }

  download_doc = head + "InfoWars download link: ";

  if (url.search ("http") == 0)
    download_doc = download_doc + "<a href='" + url + "'>" + url + "</a>" + tail; else
    download_doc = download_doc + "Not available" + tail;

  s = '<source src="';
  n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 200);
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

  if (url.search ("m3u8") < 0 || stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_153news = async (id, frame, fmt) =>
{
  var tag = "153news"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://153news.net/watch_video.php?v=" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var n = textData.search ("<video"); if (n < 0) throw ("!!!");

  url = crack_source (textData.substr (n, 1000), frame, fmt);
  if (url == "") throw ("!!!"); n = url.search ("<>");
  fmt = url.substr (n + 2); url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_liveleak = async (id, frame, fmt) =>
{
  var tag = "liveleak"; if (is_busy (frame)) return;
  var url = "https://www.liveleak.com/e/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var n = textData.search ("<video"); if (n < 0) throw ("!!!");

  url = crack_source (textData.substr (n, 1000), frame, fmt);
  if (url == "") throw ("!!!"); n = url.search ("<>");
  fmt = url.substr (n + 2); url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_brighteon = async (id, frame, fmt) =>
{
  var tag = "brighteon"; if (is_busy (frame)) return;
  var url = getid (id, 36); if (!url) url = getid (id, 13);
  if (!url) { document.getElementById ("id" + frame).value = "Invalid ID"; return; }

  id = url; url = "https://www.brighteon.com/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 300);
  url = url.substr (0, url.search ('"'));
  if (url.search ("m3u8") < 0) throw ("!!!");

  if (stream_all (frame, 0)) fmt = 0; else
  {
    response = await fetch (cors_bypass + url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }
  
} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_dailymotion = async (id, frame, fmt) =>
{
  var f = [0,0,0,0,0,0,0,0];

  var tag = "dailymotion"; if (is_busy (frame)) return;
  var url = "https://www.dailymotion.com/embed/video/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  url = "https://www.dailymotion.com/player/metadata/video/" + id;

  var response = await fetch (url);
  var jsonData = await response.json();

  var sub = jsonData.qualities;

  f[0] = (sub ["380"] != undefined);
  f[1] = (sub ["480"] != undefined);
  f[2] = (sub ["720"] != undefined);

  fmt = getformat (f, fmt); fixformat (f, frame); if (!fmt) throw ("!!!");
  
  if (fmt == 19) fmt = 480; else
  if (fmt == 22) fmt = 720; else fmt = 380;

  if ((url = sub [fmt][1]) != undefined) url = url.url; else
  {
    stream_all (frame, 1); url = sub [fmt][0].url;
  }

/*
  url = jsonData.qualities["auto"][0].url; if (url == undefined) throw ("!!!");

  if (stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    jsonData = await response.text();

    url = crack_m3u8 (url, jsonData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

  var n = url.search ("#"); if (n > 0) url = url.substr (0, n);
*/
  
} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_mrctv = async (id, frame, fmt) =>
{
  var f = [0,0,0,0,0,0,0,0];

  var tag = "mrctv"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://www.mrctv.org/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  f[0] = textData.search ("240p.mp4") + 1;
  f[1] = textData.search ("480p.mp4") + 1;
  f[2] = textData.search ("720p.mp4") + 1;

  fmt = getformat (f, fmt); fixformat (f, frame); if (!fmt) throw ("!!!");

  var n = argformat (fmt); url = textData.substr (f[n] - 100, 107);
  url = url.substr (url.search ("http")); if (url == "") throw ("!!!");
  url = url.replace (/\\/g, "");

  if (n == 0) fmt = 240;
  if (n == 1) fmt = 480;
  if (n == 2) fmt = 720;

/*
  if (id.length > 5)
  {
    fmt = 0; no_format (frame);
    url = "https://cdn.mrctv.org/sites/default/files/videos/converted/" + id + ".mp4";
  }
*/
} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_natfilmbrd = async (id, frame, fmt) =>
{
  var tag = "natfilmbrd"; if (is_busy (frame)) return;
  var url = "https://cdnapisec.kaltura.com/p/2081491/sp/208149100/playManifest/entryId/" + id +
    "/flavorIds/1_z997vpzn/format/applehttp/protocol/https/a.m3u8";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  if (stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    var n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_jwplayer = async (id, frame, fmt) =>
{
  var tag = "jwplayer"; if (is_busy (frame)) return;
  var url = "https://cdn.jwplayer.com/manifests/" + id + ".m3u8";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  if (stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    var n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_soundcloud = async (id, frame, fmt) =>
{
  var tag = "soundcloud"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "/progressive";
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  var sub = textData.substr (n - 200, 200 + s.length);
  sub = sub.substr (sub.search ('"url":"') + 7);

  n = textData.search ("/widget-"); if (n < 0) throw ("!!!");

  url = textData.substr (n - 30, 100);
  url = url.substr (url.search ('"') + 1);
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

  response = await fetch (url);
  textData = await response.text();

  n = textData.search ("client_id"); if (n < 0) throw ("!!!");
  url = textData.substr (n, 200);
  url = url.substr (url.search ('":"') + 3);
  url = url.substr (0, url.search ('"'));
  url = cors_bypass + sub + "?client_id=" + url;

  response = await fetch (url);
  textData = await response.json();

  url = textData.url; if (url == undefined) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

///////////////////
///// DIG DUG /////
///////////////////

var digid = function (frame)
{
  var doc, src, fmt;

  clear_video (frame);

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  src = document.getElementById ("src" + frame).value;
  doc = document.getElementById ("line" + frame).value;

  if (src == 10) dig_test (doc, frame, fmt); else
  if (src == 3 ) dig_infowars (doc, frame, fmt); else
  if (src == 4 ) dig_brighteon (doc, frame, fmt); else
  if (src == 9 ) dig_mrctv (doc, frame, fmt); else
  if (src == 8 ) dig_prageru (doc, frame, fmt); else
  if (src == 6 ) dig_tedtalks (doc, frame, fmt); else
  if (src == 7 ) dig_natfilmbrd (doc, frame, fmt); else
  if (src == 22) dig_facebook (doc, frame, fmt); else
  if (src == 25) dig_jwplayer (doc, frame, fmt); else
  if (src == 24) dig_soundcloud (doc, frame, fmt); else
  if (src == 23) dig_podcast (doc, frame, fmt); else

  if (src == 20) find_brightcove (doc, "", frame, fmt); else

  document.getElementById ("id" + frame).value = "Not supported";
}
////////////////////

const dig_test = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "test"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
//  var response = await fetch (url, { mode: 'no-cors' } );
//  var response = await fetch (url, { credentials: 'include' } );
//  var response = await fetch (url, { redirect: 'manual' } );
//  console.log (response.redirected);
//  console.log (response.url);

  var response = await fetch (url);
  var textData = await response.text();
  console.log ('(' + textData + ')');

} catch (err) { console.log (err); busy = 0; }

  if (no_fail (frame)) loadwindow ("", frame, tag + ": okay");
}
////////////////////

const dig_infowars = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "infowars"; var url = doc;
  if (url.search ("infowars") < 0) url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-video-id="';
  var n = textData.search (s);
  
  if (n > 0) url = textData.substr (n + s.length, 200); else
  {
    n = textData.search ('<iframe src="'); if (n < 0) throw ("!!!");
    url = textData.substr (n, 200);

    n = url.search ("/embed/"); if (n < 0) throw ("!!!");
    url = url.substr (n + 7);
  }

  url = url.substr (0, url.search ('"'));
  if ((n = url.search ("\\?")) > 0) url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_infowars (url, frame, fmt);
}
////////////////////

const dig_brighteon = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "brighteon"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "/embed/"; var n = textData.search (s);
  if (n < 0) { s = '"videoKey":"'; n = textData.search (s); }
  if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search ('"'));

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_brighteon (url, frame, fmt);
}
////////////////////

const dig_mrctv = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "mrctv"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();
  var s, n;

  if (url.search ("podcast") > 0)
  {
    s = "/embed/html5/episode/";
    n = textData.search (s); if (n < 0) throw ("!!!");
    url = textData.substr (n + s.length, 10);
    url = url.substr (0, url.search ("\\?"));
    url = "https://www.podomatic.com/v2/episodes/" + url;

    response = await fetch (url);
    textData = await response.json();

    url = textData.episode.media_url;
    if (url == undefined) throw ("!!!");
  }
  else
  {
    s = "/embed/"; n = textData.search (s); if (n < 0) throw ("!!!");
    url = textData.substr (n + s.length, 6);
    busy = -busy;
  }

/*
    n = textData.search ("converted");
    if (n > 0)
    {
      url = textData.substr (n, 100); url = url.substr (url.search ("/"));
      url = url.substr (0, url.search ('"')); if (url == "") throw ("!!!");
      url = "https://cdn.mrctv.org/sites/default/files/videos/converted" + url;
    }
    else
    {
      n = textData.search ("poster="); if (n < 0) throw ("!!!");
      url = textData.substr (n, 100); 
      url = url.substr (url.search ("video"));
      url = url.substr (url.search ("/") + 1);
      url = url.substr (0, url.search ("/"));

      if (url.length < 4 || url.length > 6) throw ("!!!");
      busy = -busy;
    }
  }
*/

} catch (err) { console.log (err); busy = 0; }

  if (busy > 0)
  {
    no_fail (frame); loadwindow (url, frame, tag + ": id-none");
  }
  else if (no_fail (frame)) req_mrctv (url, frame, fmt);
}
////////////////////

const dig_prageru = async (doc, frame, fmt) =>
{
  var i, j, k, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  if (is_busy (frame)) return;
  var tag = "prageru"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"og:image" content="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search ("poster") - 1);

  response = await fetch (url);
  textData = await response.json();

  url = textData.playlist[0].sources; if (url == undefined) throw ("!!!");
 
  for (i = 0; i < url.length; i++)
  {
    if (url[i].type != "video/mp4") continue;

    k = url[i].height;

    if ((j = chkformat (k)) >= 0) if (r[j] < k) { f[j] = i + 1; r[j] = k; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0 || (j = f[j] - 1) < 0) throw ("!!!");

  fmt = url[j].height; if ((url = url[j].file) == undefined) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
}
////////////////////

const dig_tedtalks = async (doc, frame, fmt) =>
{
  var f = [0,0,0,0,0,0,0,0];

  if (is_busy (frame)) return;
  var tag = "tedtalks"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"nativeDownloads"';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n, 1000);

  f[0] = url.search ('"medium":"http') > 0;
  f[1] = url.search ('"high":"http') > 0;

  fmt = getformat (f, fmt); fixformat (f, frame); n = argformat (fmt);

  if (n == 0) { s = '"medium"'; fmt = 288; } else
  if (n == 1) { s = '"high"'; fmt = 480; } else throw ("!!!");

  url = url.substr (url.search (s) + s.length + 2);
  url = url.substr (0, url.search ('"'));

  n = url.search ("\\?"); if (n > 0) url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
}
////////////////////

const dig_natfilmbrd = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "natfilmbrd"; var url = doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

  var n = url.search ("\\?");
  if (n > 0) url = url.substr (0, n);
  if (doc.substr (-1) != "/") url = url + "/";
  url = url + "embed/player";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"entry_id": "';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  url = textData.substr (n + s.length, 20);
  url = url.substr (0, url.search ('"'));

  if (url.length != 10) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_natfilmbrd (url, frame, fmt);
}
////////////////////

const dig_facebook = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "facebook"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"og:video" content="'; var n = textData.search (s);
  if (n < 0) { s = '"sd_src_no_ratelimit":"'; n = textData.search (s); }
  if (n < 0) { s = '"video_url":"'; n = textData.search (s); }
  if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 500);
  url = url.substr (0, url.search ('"'));
  url = url.replace (/amp;/g, "");
  url = url.replace (/\\/g, "");

} catch (err) { console.log (err); busy = 0; }

  no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": id-none");
}
////////////////////

const dig_jwplayer = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "jwplayer"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"video_id":"';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  url = textData.substr (n + s.length, 20);
  url = url.substr (0, url.search ('"'));
  if (url.length != 8) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_jwplayer (url, frame, fmt);
}
////////////////////

const dig_soundcloud = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "soundcloud"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "/tracks/";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 12);
  if ((n = url.search ('"')) < 0) n = url.search ("/");
  if (n < 0) throw ("!!!"); url = url.substr (0, n);

  if (url.length < 6 || url.length > 9) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_soundcloud (url, frame, fmt);
}
////////////////////

const dig_podcast = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "podcast"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"assetUrl":"'; var n = textData.search (s);             // Apple Podcast
  if (n < 0) { s = 'enclosureUrl":"'; n = textData.search (s); }   // Radio Public
  if (n < 0) { s = 'episodeURL: "'; n = textData.search (s); }     // Stitcher
  if (n < 0) { s = '<source src="'; n = textData.search (s); }     // Overcast
  if (n < 0) { s = 'data-uri="'; n = textData.search (s); }        // Podbean
  if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 500);
  n = url.search ('"'); if (n > 0) url = url.substr (0, n);
  n = url.search ("\\?"); if (n > 0) url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": id-none");
}
////////////////////

var chkformat = function (q)
{
  if (q > 100 && q <= 420) return 0; else
  if (q > 420 && q <= 580) return 1; else
  if (q > 580 && q <= 800) return 2; else

  return (-1);
}
////////////////////

var argformat = function (fmt)
{
  if (fmt == 18) return 0;
  if (fmt == 19) return 1;
  if (fmt == 22) return 2;
  if (fmt == 37) return 3;
  if (fmt == 43) return 4;
  if (fmt == 44) return 5;
  if (fmt == 45) return 6;
  if (fmt == 46) return 7;

  return -1;
}

var getformat = function (f, fmt)
{
  var m = 0, n = fmt;

  if (n == 46) if (f[7]) m = n; else { if (!m) m = 37; n = 45; }
  if (n == 45) if (f[6]) m = n; else { if (!m) m = 22; n = 44; }
  if (n == 44) if (f[5]) m = n; else { if (!m) m = 19; n = 43; }
  if (n == 43) if (f[4]) m = n; else { if (!m) m = 18; n = m;  }

  if (n == 37) { if (f[3]) m = n; else n = 22; }
  if (n == 22) { if (f[2]) m = n; else n = 19; }
  if (n == 19) { if (f[1]) m = n; else n = 18; }
  if (n == 18) { if (f[0]) m = n; else m = 0;}

  n = fmt; if (m) return m;

  if (n == 43) if (f[4]) m = n; else { if (!m) m = 18; n = 44; }
  if (n == 44) if (f[5]) m = n; else { if (!m) m = 19; n = 45; }
  if (n == 45) if (f[6]) m = n; else { if (!m) m = 22; n = 46; }
  if (n == 46) if (f[7]) m = n; else { if (!m) m = 37; n = m;  }

  if (n == 18) { if (f[0]) m = n; else n = 19; }
  if (n == 19) { if (f[1]) m = n; else n = 22; }
  if (n == 22) { if (f[2]) m = n; else n = 37; }
  if (n == 37) { if (f[3]) m = n; else m = 0;  }

  return m;
}
////////////////////

var fixlist = function (item, doc, state)
{
  var txt = doc.options[item].text.slice (0,-1);
  if (state < 0) txt = txt + '*'; else if (state > 0) txt = txt + '+'; else txt = txt + '-';
  doc.options[item].text = txt;
}
////////////////////

var fixformat = function (f, frame)
{
  var doc = document.getElementById ("fmt" + frame);

  fixlist (0, doc, f[0]); fixlist (1, doc, f[1]); fixlist (2, doc, f[2]);
  fixlist (3, doc, f[4]); fixlist (4, doc, f[5]); fixlist (5, doc, f[6]);

/*
  fixlist (0, doc, f[0]); fixlist (1, doc, f[1]);
  fixlist (2, doc, f[2]); fixlist (3, doc, f[3]);
  fixlist (4, doc, f[4]); fixlist (5, doc, f[5]);
  fixlist (6, doc, f[6]); fixlist (7, doc, f[7]);
*/
}
////////////////////

var no_format = function (frame)
{
  var doc = document.getElementById ("fmt" + frame);

  fixlist (0, doc, -1); fixlist (1, doc, -1);
  fixlist (2, doc, -1); fixlist (3, doc, -1);
  fixlist (4, doc, -1); fixlist (5, doc, -1);
}
////////////////////

/////////////////////////////
///// NEWS & PROPAGANDA /////
/////////////////////////////

var loadnews = function (frame, mode)
{
  var url, fmt, doc, sub, src;

  clear_video (frame);

  if (mode == 1)
  {
    url = document.getElementById ("line" + frame).value;
    url = url.replace (/\\/g, "");
    if (!busy && url != "") loadwindow (url, frame, "");
    return;
  }

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  url = document.getElementById ("stk" + frame).value;
  if (!url) url = document.getElementById ("id" + frame).value;

  if (mode == 2) url = error;

  src = document.getElementById ("src" + frame).value;
  sub = url.split (": ");

  if (sub.length > 1) url = sub [sub.length - 1]; else
  {
    sub = url.split (":"); doc = sub [0];
    if (sub.length > 1 && doc.length < 4)
    {
      src = 0; url = sub [sub.length - 1];

      if (doc == "fox") src = 1;
      if (doc == "abc") src = 2;
      if (doc == "cnb") src = 4;
      if (doc == "msn") src = 7;
      if (doc == "pbs") src = 8;
      if (doc == "cbc") src = 11;
      if (doc == "ctv") src = 12;
      if (doc == "glo") src = 13;
      if (doc == "tvo") src = 14;
      if (doc == "bbc") src = 21;
      if (doc == "alj") src = 22;

      doc = document.getElementById ("src" + frame);
      if (doc.value != src) for (mode = 1; mode < doc.length; mode++)
        if (doc.options [mode].value == src) { doc.selectedIndex = mode; break; }
    }
  }      
  if (url == "") return;

  if (src == 1  && (url = getid (url, 13))) req_fox (url, frame, fmt); else
  if (src == 2  && (url = getid (url,  8))) req_abc (url, frame, fmt); else
  if (src == 4  && (url = getid (url, 10))) req_cnbc (url, frame, fmt); else
  if (src == 7  && (url = getid (url,-13))) req_msnbc (url, frame, fmt); else
  if (src == 8  && (url = getid (url, 10))) req_pbs (url, frame, fmt); else
  if (src == 11 && (url = getid (url,-13))) req_cbc (url, frame, fmt); else
  if (src == 12 && (url = getid (url,  7))) req_ctv (url, frame, fmt); else
  if (src == 13 && (url = getid (url,  7))) req_global (url, frame, fmt); else
  if (src == 14 && (url = getid (url, 13))) req_tvo (url, frame, fmt); else
  if (src == 21 && (url = getid (url,  8))) req_bbc (url, frame, fmt); else
  if (src == 22 && (url = getid (url, 13))) req_aljazeera (url, frame, fmt); else
  if (src == 25 && (url = getid (url, 22))) req_bloomberg (url, frame, fmt); else

  if (src == 0 && (url = getid (url, 11))) request (url, frame, fmt); else

  document.getElementById ("id" + frame).value = (url ? "Not supported" : "Invalid ID");
}
////////////////////

const req_fox = async (id, frame, fmt) =>
{
  var tag = "fox"; if (is_busy (frame)) return;
  var url = "https://video.foxnews.com/v/feed/video/" + id + ".js";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  var response = await fetch (url);
  var jsonData = await response.json();

  if (jsonData.error != undefined)
  {
    response = await fetch ("https://video.foxbusiness.com/v/feed/video/" + id + ".js");
    jsonData = await response.json();
  }

  if (jsonData.error != undefined) throw ("!!!");
  url = jsonData.channel.item["media-content"]["@attributes"].url;
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_abc = async (id, frame, fmt) =>
{
  var tag = "abc"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://abcnews.go.com/video/itemfeed?id=" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var jsonData = await response.json();

  url = jsonData.channel.item["media-group"]["media-content"][2]["@attributes"].url; 

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_cnbc = async (id, frame, fmt) =>
{
  var tag = "cnbc"; if (is_busy (frame)) return;
  var url = "https://link.theplatform.com/s/gZWlPC/media/guid/2408950221/" + id + "/meta.smil?format=smil";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  url = crack_smil (textData, frame, fmt); if (url == "") throw ("!!!");

  var n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_msnbc = async (id, frame, fmt) =>
{
  var tag = "msnbc"; if (is_busy (frame)) return;
//var url = cors_bypass + "https://www.msnbc.com/msnbc/embedded-video/mmvo" + id;
  var url = cors_bypass + "https://www.nbcnews.com/news/embedded-video/mmvo" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '},"videoType":'; var n = textData.search (s);
  if (n < 0) { s = '"videoType":'; n = textData.search (s); }
  if (n < 0) throw ("!!!");

  url = textData.substr (n, 2000);
  var sub = url.split ('"publicUrl":"'); if (sub.length < 2) throw ("!!!");
  url = sub [sub.length - 1]; url = url.substr ('"');

  n = url.search ("\\?"); if (n > 0) url = url.substr (0, n);
  if (url == "") throw ("!!!");

  url = url.replace (/\\u002F/g, "/");
  url = url + "?mbr=true&format=smil";
	
  response = await fetch (url);
  textData = await response.text();

  url = crack_smil (textData, frame, fmt); if (url == "") throw ("!!!");

  n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_pbs = async (id, frame, fmt) =>
{
  var tag = "pbs"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://player.pbs.org/portalplayer/" + id + "/";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"encodings": \\["';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length - 1, 200);
  url = url.substr (0, url.search ('"'));

  url = cors_bypass + url + "?format=jsonp&callback=__jp1";

  response = await fetch (url);
  textData = await response.text();

  s = '"url": "'; n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length);
  url = url.substr (0, url.search ('"'));

  if (url.search ("m3u8") < 0 || stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_cbc = async (id, frame, fmt) =>
{
  var tag = "cbc"; if (is_busy (frame)) return;
  var url = "https://link.theplatform.com/s/ExhSPC/media/guid/2655402169/" + id + "/meta.smil?format=smil";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  url = crack_smil (textData, frame, fmt); if (url == "") throw ("!!!");

  var n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_ctv = async (id, frame, fmt) =>
{
  var tag = "ctv"; if (is_busy (frame)) return;
  var url = "https://capi.9c9media.com/destinations/ctvnews_web/platforms/desktop/contents/" + id;
  var sub = "?%24include=%5BContentPackages%5D";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url + sub);
  var jsonData = await response.json();

  sub = jsonData.ContentPackages[0].Id;
  url = url + "/contentpackages/" + sub + "/manifest.mpd";

  stream_all (frame, 2);

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": "  + id);
}
////////////////////

const req_global = async (id, frame, fmt) =>
{
  var tag = "global"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://globalnews.ca/video/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'sources":\\[\\{"file":"';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length - 2, 200);
  url = url.substr (0, url.search ('"'));
  url = url.replace (/\\/g, "");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": "  + id);
}
////////////////////

const req_tvo = async (id, frame, fmt) =>
{
  load_brightcove ("18140038001", id, "tvo", frame, fmt);
}
////////////////////

const req_bbc = async (id, frame, fmt) =>
{
  var tag = "bbc"; if (is_busy (frame)) return;
  url = cors_bypass + "https://open.live.bbc.co.uk/mediaselector/6/select/version/2.0/mediaset/pc/vpid/"
      + id + "/format/xml/atk/";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var sub = textData.split ('href="'); if (sub.length < 2) throw ("!!!");

  for (var i = 1; i < sub.length; i++)
  {
    url = sub [i]; if (url.search ("https") < 0) continue;
    if (url.search ("mpd") > 0 && url.search ("gda") < 0) break;
  }

  url = url.substr (0, url.search ('"'));
  url = url.replace (/amp;/g, "");

  if (url.search ("mp4") < 0) stream_all (frame, 2);

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": "  + id);
}
////////////////////

const req_aljazeera = async (id, frame, fmt) =>
{
  load_brightcove ("665003303001", id, "aljazeera", frame, fmt);
}
////////////////////

const req_bloomberg = async (id, frame, fmt) =>
{
  var f = [0,0,0,0,0,0,0,0], u = [], n;

  var tag = "bloom"; if (is_busy (frame)) return;
  url = "https://www.bloomberg.com/multimedia/api/embed?id=" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url, { mode: 'no-cors' } );   // bypass error 500
  response = await fetch (url);   // 2nd fetch gets the data from cache; this is weird

  var textData = await response.json();
  var sub = textData.downloadURLs;

  if ((url = sub["600"])  != undefined) { f[0] = 360; u[0] = url; }
  if ((url = sub["700"])  != undefined) { f[0] = 360; u[0] = url; }
  if ((url = sub["800"])  != undefined) { f[1] = 540; u[1] = url; }
  if ((url = sub["1200"]) != undefined) { f[2] = 720; u[2] = url; }

  if ((n = getformat (f, fmt)))
  {
    fixformat (f, frame); n = argformat (n); fmt = f[n]; url = u[n];
  }
  else
  {
    url = textData.streams[0].url; if (!url) throw ("!!!");

    if (stream_all (frame, 1)) fmt = 0; else
    {
      response = await fetch (url);
      textData = await response.text();

      url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

///////////////////
///// DIG DUG /////
///////////////////

var dignews = function (frame)
{
  var doc, src, fmt;

  clear_video (frame);

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  src = document.getElementById ("src" + frame).value;
  doc = document.getElementById ("line" + frame).value;

  if (src == 1 ) dig_fox (doc, frame, fmt); else
  if (src == 2 ) dig_abc (doc, frame, fmt); else
  if (src == 3 ) dig_cbs (doc, frame, fmt); else
  if (src == 4 ) dig_cnbc (doc, frame, fmt); else
  if (src == 5 ) dig_cnn (doc, frame, fmt); else
  if (src == 6 ) dig_cspan (doc, frame, fmt); else
  if (src == 7 ) dig_msnbc (doc, frame, fmt); else
  if (src == 8 ) dig_pbs (doc, frame, fmt); else
  if (src == 11) dig_cbc (doc, frame, fmt); else
  if (src == 12) dig_ctv (doc, frame, fmt); else
  if (src == 13) dig_global (doc, frame, fmt); else
  if (src == 14) dig_tvo (doc, frame, fmt); else
  if (src == 21) dig_bbc (doc, frame, fmt); else
  if (src == 24) dig_presstv (doc, frame, fmt); else
  if (src == 22) dig_aljazeera (doc, frame, fmt); else
  if (src == 25) dig_bloomberg (doc, frame, fmt); else
  if (src == 23) dig_ndtv (doc, frame, fmt); else

  document.getElementById ("id" + frame).value = "Not supported";
}
////////////////////

const dig_fox = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "fox"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-video-id="'; var n = textData.search (s);
  if (n < 0) { s = "video_id="; n = textData.search (s); }

  if (n > 0) url = textData.substr (n + s.length, 13); else
  {
    s = 'data-url="'; n = textData.search (s);
    if (n > 0)
    {
      url = textData.substr (n + s.length, 200);
      url = url.substr (url.search ("/v/") + 3, 13);
    }
    else
    {
      s = "redirect.mp3"; n = textData.search (s); if (n < 0) throw ("!!!");
      url = textData.substr (n + s.length + 2, 200);
      url = url.substr (0, url.search ('"')); if (url == "") throw ("!!!");
      url = "https://" + url.replace (/\\/g, "");
      busy = -busy;
    }
  }
  busy = -busy;

} catch (err) { console.log (err); busy = 0; }

  if (busy > 0)
  {
    no_fail (frame); loadwindow (url, frame, tag + ": id-none");
  }
  else if (no_fail (frame)) req_fox (url, frame, fmt);
}
////////////////////

const dig_abc = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "abc"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-video="'; var x = 0;
  var n = textData.search (s);

  if (n < 0) { s = 'null/video/itemfeed\\?id='; n = textData.search (s); x = 1; }
  if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length - x, 100);
  url = url.substr (0, url.search ('"'));

  if (url.length != 8) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_abc (url, frame, fmt);
}
////////////////////

const dig_cbs = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "cbs"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"embedUrl":"'; var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length, 300);
    url = url.substr (0, url.search ('"'));
    url = url.replace (/\\/g, "");

    if (url != doc)
    {
      response = await fetch (cors_bypass + url);
      textData = await response.text();
    }
  }

  n = textData.search ("defaultPayload");
  if (n > 0) textData = textData.substr (n);

  s = '"video":"';
  n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 300);
  url = url.substr (0, url.search ('"'));
  
  if (url.search ("m3u8") < 0 || stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
}
////////////////////

const dig_cnbc = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "cnbc"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var r = "'"; var s = "'content_id' : '";
  var n = textData.search (s);

  if (n < 0)
  {
    r = '"'; s = 'data-vilynx-id="';
    n = textData.search (s); if (n < 0) throw ("!!!");
  }

  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search (r));

  if (url.length != 10) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_cnbc (url, frame, fmt);
}
////////////////////

const dig_cnn = async (doc, frame, fmt) =>
{
  var f = [0,0,0,0,0,0,0,0];

  if (is_busy (frame)) return;
  var tag = "cnn"; var url = doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"embedUrl": "';
  var n = textData.search (s);

  if (n < 0)
  {
    s = 'data-video-id="'; n = textData.search (s); if (n < 0) throw ("!!!");
    url = textData.substr (n + s.length, 300);
    url = url.substr (0, url.search ('"'));
  }
  else
  {
    url = textData.substr (n + s.length, 300);
    url = url.substr (0, url.search ('&'));
    url = url.substr (url.search ("video=") + 6);
  }

  if (url.search ("/") > 0)
  {
    url = textData.substr (n + s.length, 300);
    url = url.substr (0, url.search ('"'));
    url = url.replace ("fav/?video=", "video?id=");

    response = await fetch (url);
    textData = await response.json();

    url = textData.files[0].fileUri;

    if (stream_all (frame, 1)) fmt = 0; else
    {
      response = await fetch (url);
      textData = await response.text();

      url = crack_m3u8 (url, textData, frame, fmt);
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }
  }
  else
  {
    url = "https://www.cnn.com/video/data/3.0/video/" + url + "/index.json";

    response = await fetch (url);
    textData = await response.json();

    var sub = textData.files; if (sub == undefined) throw ("!!!");

    for (n = 0; n < sub.length; n++)
    {
      url = sub [n].bitrate;
      if (url == undefined) continue;
      if (url.search ("_mp4") < 0) continue;

      if (url.search ("640x360")  == 0) f[0] = n;
      if (url.search ("896x504")  == 0) f[1] = n;
      if (url.search ("1280x720") == 0) f[2] = n;
    }

    fmt = getformat (f, fmt); fixformat (f, frame); if (!fmt) throw ("!!!");

    n = argformat (fmt); url = sub [f[n]].fileUri; if (url == undefined) throw ("!!!");

    if (n == 0) fmt = 360;
    if (n == 1) fmt = 504;
    if (n == 2) fmt = 720;

    url = "http://ht.cdn.turner.com/cnn/big" + url;
  }

} catch (err) { console.log (err); busy = 0; }

  if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
}
////////////////////

const dig_cspan = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "cspan"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "sources: \\[\\{file: '";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length - 2, 100);
  url = url.substr (0, url.search ("'"));

  if (stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
}
////////////////////

const dig_msnbc = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "msnbc"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'video":{"id":"mmvo';
  var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length, 20); url = url.substr (0, url.search ('"'));
    busy = -busy; if (url.length < 11 || url.length > 13) throw ("!!!");
  }
  else
  {
    n = textData.search ('"embedURL":');
    if (n < 0) n = textData.search ('"embedUrl":');
    if (n < 0) throw ("!!!");

    url = textData.substr (n, 200); s = url.substr (url.search ("/p/") + 3);
    s = s.substr (0, s.search ("/")); n = url.search ("/guid/");

    if (n < 0) { busy = -busy; n = url.search ("media/"); }
    if (n < 0) throw ("!!!");

    url = url.substr (n + 6); url = url.substr (0, url.search ("\\?"));
    if (s == "" || url == "") throw ("!!!");

    s = "https://link.theplatform.com/s/" + s + "/media/";

    if (busy < 0)
    {
// www.nbcsports.com
      busy = -busy; url = s + url + "?format=smil";

      response = await fetch (url);
      textData = await response.text();

      url = crack_smil (textData, frame, fmt); if (url == "") throw ("!!!");
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }
    else
    {
// www.nbc.com/dateline
      url = s + "guid/" + url + "/meta.smil?manifest=m3u";  // mp4 does not work

      if (stream_all (frame, 1)) fmt = 0; else
      {
        response = await fetch (url);
        textData = await response.text();

        url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
        n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
      }
    }
  }

} catch (err) { console.log (err); busy = 0; }

  if (busy > 0)
  {
    if (!fmt) no_format (frame); no_fail (frame);
    loadwindow (url, frame, tag + " [" + fmt + "]: id-none");
  }
  else if (no_fail (frame)) req_msnbc (url, frame, fmt);
}
////////////////////

const dig_pbs = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "pbs"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '<iframe src="https://player'; var n = textData.search (s);

  if (n < 0)
  {
    var r = "'"; s = "'VideoTPMediaId': '"; n = textData.search (s);
    if (n < 0) { r = '"'; s = 'data-coveid="'; n = textData.search (s); }
    if (n < 0) { r = '"'; s = 'data-coveId="'; n = textData.search (s); }
    if (n < 0) throw (s);

    url = textData.substr (n + s.length, 20);
    url = url.substr (0, url.search (r));
  }
  else
  {
    url = textData.substr (n, 100);
    n = url.search ("player/"); if (n < 0) throw ("!!!");
    url = url.substr (n + 7); url = url.substr (0, url.search ('"'));
    n = url.search ("/"); if (n > 0) url = url.substr (0, n);
  }

  if (url.length != 10) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_pbs (url, frame, fmt);
}
////////////////////

const dig_cbc = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "cbc"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var r = '"'; var s = '"guid":"'; var n = textData.search (s);

  if (n < 0)
  {
    r = "'"; s = "'mediaId': '";
    n = textData.search (s); if (n < 0) throw ("!!!");
  }

  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search (r));

  if (url.length < 10 || url.length > 13) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_cbc (url, frame, fmt);
}
////////////////////

const dig_ctv = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "ctv"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-video-id="';
  var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length, 20);
    url = url.substr (0, url.search ('"'));
  }

  if (n < 0)
  {
    s = "\\); initPlayer\\(";
    if ((n = textData.search (s)) > 0)
    {
      url = textData.substr (n + s.length - 2, 100);
      url = url.substr (0, url.search ("\\)"));
    }
  }

  if (n < 0)
  {
    s = "getAuthStates\\(";
    if ((n = textData.search (s)) > 0)
    {
      url = textData.substr (n + s.length, 300);
      url = url.substr (0, url.search ('"'));
      sub = url.split (","); if (sub.length == 0) throw ("!!!");
      url = sub [sub.length - 1];
    }
  }

  if (n < 0)
  {
    s = "contentId: ";
    if ((n = textData.search (s)) > 0)
    {
      url = textData.substr (n + s.length, 20);
      url = url.substr (0, url.search (','));
    }
  }

  if (n < 0)
  {
    s = "currentId=";
    if ((n = textData.search (s)) > 0)
    {
      url = textData.substr (n + s.length, 20);
      url = url.substr (0, url.search ('&'));
    }
  }

  if (n < 0 || url.length != 7) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_ctv (url, frame, fmt);
}
////////////////////

const dig_global = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "global"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-displayinline="';
  var n = textData.search (s);

  if (n < 0)
  {
    s = 'data-miniplayer-video="'; n = textData.search (s);
    if (n < 0) { s = '<iframe src="'; n = textData.search (s); }
    if (n < 0) throw ("!!!");
  }
  url = textData.substr (n, 100);

  s = "/playlist/"; n = url.search (s);
  if (n < 0) { s = "/embed/"; n = url.search (s); }
  if (n < 0) throw ("!!!");

  url = url.substr (n + s.length, 7);

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_global (url, frame, fmt);
}
////////////////////

const dig_tvo = async (doc, frame, fmt) =>
{
  find_brightcove (doc, "tvo", frame, fmt);
}
////////////////////

const dig_bbc = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "bbc"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "embed\\\\";
  var n = textData.search (s);

  if (n < 0) { s = "versionID&quot;:&quot;"; n = textData.search (s); }
  if (n < 0) { s = 'data-vpid="'; n = textData.search (s); }
  if (n < 0) { s = 'data-id="'; n = textData.search (s); }
  if (n < 0) { s = '"vpid":"'; n = textData.search (s); }
  if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 20);

  n = url.search ("\\\\"); if (n < 0) n = url.search ("&");
  if (n < 0) n = url.search ('"'); if (n != 8) throw ("!!!");

  url = url.substr (0, 8);

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_bbc (url, frame, fmt);
}
////////////////////

const dig_aljazeera = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "aljazeera"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "RenderPagesVideo\\('";
  var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length - 1, 20);
    url = url.substr (0, url.search ("'"));
  }

  if (n < 0)
  {
    s = "RenderGeneralBCVideo\\(";
    n = textData.search (s); if (n < 0) throw ("!!!");
    url = textData.substr (n + s.length - 1, 20);
    url = url.substr (0, url.search (","));
  }

  if (url.length != 13) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_aljazeera (url, frame, fmt);
}
////////////////////

const dig_presstv = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "presstv"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length, 200);
    url = url.substr (0, url.search ('"'));
    if (url == "") throw ("!!!");
  }
  else
  {
    n = textData.search ('mp4">'); if (n < 0) throw ("!!!");
    url = textData.substr (n - 100, 99);
    url = url.substr (url.search ("http"));
    if (url == "") throw ("!!!");
    url = url + "_low400.mp4";
  }

} catch (err) { console.log (err); busy = 0; }

  no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": id-none");
}
////////////////////

const dig_bloomberg = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "bloom"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-url="'; var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n + s.length, 500);
    url = url.substr (0, url.search ('"'));
    
    response = await fetch (cors_bypass + url);
    textData = await response.text();
  }

  s = '"resourceId":"';
  n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 50);
  url = url.substr (0, url.search ('"'));
  if (url.length != 22) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_bloomberg (url, frame, fmt);
}
////////////////////

const dig_ndtv = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "ndtv"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "media_mp4"; var n = textData.search (s);

  if (n > 0)
  {
    url = textData.substr (n, 300); n = url.search ("\\.mp4");
  }

  if (n < 0)
  {
    s = "media:"; n = textData.search (s);
    if (n < 0) { s = '"media"'; n = textData.search (s); }
    if (n < 0) { s = "'media'"; n = textData.search (s); }
    if (n < 0) throw ("!!!");

    url = textData.substr (n, 300); n = url.search ("m3u8");
    if (n < 0) n = url.search ("\\.mp4"); else stream_all (frame, 1);
    if (n < 0) throw ("!!!");
  }

  url = url.substr (0, n + 4);
  url = url.substr (url.search ("http"));
  url = url.replace (/\\/g, "");

} catch (err) { console.log (err); busy = 0; }

  no_format (frame); if (no_fail (frame)) loadwindow (url, frame, tag + ": id-none");
}
////////////////////

////////////////////////////
///// FREE MOVIES & TV /////
////////////////////////////

var loadmovie = function (frame, mode)
{
  var url, fmt, doc, sub, src;

  clear_video (frame);

  if (mode == 1)
  {
    url = document.getElementById ("line" + frame).value;
    url = url.replace (/\\/g, "");
    if (!busy && url != "") loadwindow (url, frame, "");
    return;
  }

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  if (mode == 2)
  {
    open_livestream (error, fmt); return;
  }

  url = document.getElementById ("stk" + frame).value;
  if (url == "") url = document.getElementById ("id" + frame).value; else
  {
    open_livestream (url, fmt); return;
  }

  src = document.getElementById ("src" + frame).value;
  sub = url.split (": ");

  if (sub.length > 1) url = sub [sub.length - 1]; else
  {
    sub = url.split (":"); doc = sub [0];
    if (sub.length > 1 && doc.length < 4)
    {
      src = 0; url = sub [sub.length - 1];

      doc = document.getElementById ("src" + frame);
      if (doc.value != src) for (mode = 0; mode < doc.length; mode++)
        if (doc.options [mode].value == src) { doc.selectedIndex = mode; break; }
    }
  }      
  if (url == "") return;

  if (src == 2  && (url = getid (url, -8))) req_vidcloud (url, frame, fmt); else
  if (src == 3  && (url = getid (url,  6))) req_tubitv (url, frame, fmt); else
  if (src == 4  && (url = getid (url,-11))) req_verystream (url, frame, fmt); else
  if (src == 5  && (url = getid (url, 12))) req_gounlimited (url, frame, fmt); else
  if (src == 6  && (url = getid (url, -8))) req_xhamster (url, frame, fmt); else
  if (src == 7  && (url = getid (url, 15))) req_pornhub (url, frame, fmt); else
  if (src == 17 && (url = getid (url, 12))) req_vidtodo (url, frame, fmt); else
  if (src == 16 && (url = getid (url, 12))) req_clipwatching (url, frame, fmt); else
  if (src == 12 && (url = getid (url, 12))) req_flix555 (url, frame, fmt); else
  if (src == 19 && (url = getid (url, 12))) req_onlystream (url, frame, fmt); else
  if (src == 13 && (url = getid (url, 12))) req_vidlox (url, frame, fmt); else
  if (src == 14 && (url = getid (url, 10))) req_rapidvideo (url, frame, fmt); else
  if (src == 18 && (url = getid (url, 12))) req_vidoza (url, frame, fmt); else
  if (src == 15 && (url = getid (url, 12))) req_vshare (url, frame, fmt); else
  if (src == 21 && (url = getid (url, -6))) req_audiorealm (url, frame, fmt); else

  if (src == 0  && (url = getid (url, 11))) request (url, frame, fmt);

  else document.getElementById ("id" + frame).value = (url ? "Not supported" : "Invalid ID");
}
////////////////////

var open_livestream = function (url, fmt)
{
  var m = 1, n, f = [0,0,0,0,0,0,0,0];

  if (url.substr (0,1) != "/") m = 0; else
  {
    var s = url.split (" "); var t = s[0].split ("/");
    f[0] = t[1] * 1; f[1] = t[2] * 1; f[2] = t[3] * 1;
    n = getformat (f, fmt); if ((n = argformat (n)) < 0) return;
    url = s[t[n+1]]; if (url == undefined || url == "") return;
  }

  n = url.search (":"); if (n > 3) return;
  var src = url.substr (0, n); url = url.substr (n+1);

  if (!busy) document.getElementById ("id7").value = "Tuning...";

  if (src == "a") open_radio ("https://www.iheart.com/live/" + url + "/?embed=true");
  if (src == "b") open_radio ("http://virtualdjradio.com/" + url + "/");

  if (src == "0") open_tv2 (2, f, fmt, url, "");
  if (src == "1") open_tv2 (1, f, fmt, url, "ustv247.tv");
  if (src == "2") open_tv2 (1, f, fmt, url, "ustvgo.tv");

  if (src == "5") open_tv1 (0, f, fmt, "https://live2.hoolatv.com/live/" + url + "/chunks.m3u8");
  if (src == "7") open_tv1 (0, f, fmt, url);
  if (src == "8") open_tv1 (1, f, fmt, url);
  if (src == "9") open_tv1 (1, f, fmt, cors_bypass + url);
}
////////////////////

var open_radio = function (url)
{
  var w = 360, h = 480;

  var specs = "width=" + w + ",height=" + h + ",top=100" + ",left=100";

  var win = window.open (url, "radiobox", specs); win.focus();
}
////////////////////

const open_tv1 = async (mode, f, fmt, url) =>
{
  var frame = 7; if (is_busy (frame)) return;

if (stream_all (frame, 1) || !mode) fmt = 0; else try
{
  var response = await fetch (url);
  var textData = await response.text();

  var sub = crack_m3u8 (url, textData, frame, fmt);

  if (sub == "") fmt = 0; else
  {
    n = sub.search ("<>"); fmt = sub.substr (n + 2); url = sub.substr (0, n);
  }
  
} catch (err) { console.log (err); busy = 0; }

  if (f[0] || f[1] || f[2]) fixformat (f, frame); else if (!fmt) no_format (frame);
  fmt = " [" + fmt + "]"; if (no_fail (frame)) loadwindow (url, frame, "Internet TV" + fmt);
}
////////////////////

const open_tv2 = async (mode, f, fmt, url, src) =>
{
  var n, s, sub = "", frame = 7;

  for (n = 0; n < freetv.length; n++) if (freetv [n]['name'] == url)
    if (freetv [n]['time'] < the_time - 15000) freetv.splice [n,1]; else
      { sub = freetv [n]['path']; break; }

  if (mode == 2) if (sub != "") mode = 1; else
    { request_invidious (url, frame, -fmt); return; }

  if (is_busy (frame)) return;

if (sub != "") url = sub; else try
{
  sub = url; url = cors_bypass + "https://" + src + "/" + url;

  var response = await fetch (url);
  var textData = await response.text();

  n = textData.search ("file: "); if (n < 0) throw ("!!!");
  url = textData.substr (n + 6, 500); s = url.substr (0,1);
  url = url.substr (1); url = url.substr (0, url.search (s));

  if (url == undefined || url == "") throw ("!!!");

  freetv.push ({'name':sub, 'time':the_time, 'path':url});

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) open_tv1 (mode, f, fmt, url);
}
////////////////////

const req_vidcloud = async (id, frame, fmt) =>
{
  var tag = "vidcloud"; if (is_busy (frame)) return;
  var url = "https://vidcloud.icu/streaming.php?id=" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var s = "file: '";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 1000);
  url = url.substr (0, url.search ("'"));

  if (url == "" || url.search ("m3u8") > 0)
  {
    s = "window.urlVideo = '";
    n = textData.search (s); if (n < 0) throw ("!!!");

    url = textData.substr (n + s.length, 200);
    url = url.substr (0, url.search ("'"));
    if (url == "") throw ("!!!");

    if (url.search ("m3u8")) (stream_all (frame, 1));
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_tubitv = async (id, frame, fmt) =>
{
  var tag = "tubitv"; if (is_busy (frame)) return;
  var url = "https://tubitv.com/movies/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) busy = 0; else
try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"manifest":';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n, 500);
  url = url.substr (url.search ("http"));
  url = url.substr (0, url.search ('"'));
  url = url.replace (/\\u002F/g, "/");
  if (url == "") throw ("!!!");

  if (stream_all (frame, 1)) fmt = 0; else
  {
    response = await fetch (url);
    textData = await response.text();

    url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_verystream = async (id, frame, fmt) =>
{
  var tag = "verystream"; if (is_busy (frame)) return;
  var url = "https://verystream.com/e/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'id="videolink">';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 200);
  url = url.substr (0, url.search ('<')); if (url == "") throw ("!!!");

  url = "https://verystream.com/gettoken/" + url;

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_gounlimited = async (id, frame) =>
{
  tag = "gounlimited"; if (is_busy (frame)) return;
  var url = "https://gounlimited.to/embed-" + id + ".html";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var n = textData.search ("'\\|\\|\\|"); if (n < 0) throw ("!!!");

  url = textData.substr (n - 3, 2000);
  url = url.substr (url.search ("\\|mp4\\|") + 5);
  var sub = url.split ("|");

  url = "https://" + sub[1] + ".gounlimited.to/" + sub[0] + "/v.mp4";

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_xhamster = async (id, frame, fmt) =>
{
  var i, j, k, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0,0,0,0,0];

  var tag = "xhamster"; if (is_busy (frame)) return;
  var url = cors_bypass + "https://xhamster.com/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = '"standard":';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  var sub = textData.substr (n + s.length);
  sub = sub.substr (0, sub.search ("\\}\\]\\}") + 3);
  sub = JSON.parse (sub);

  n = sub.mp4.length;

  for (i = 0; i < n; i++)
  {
    k = sub.mp4[i].quality; k = k.substr (0, k.search ("p"));
    if ((j = chkformat (k)) >= 0) if (r[j] < k) { f[j] = i + 1; r[j] = k; }
  }

  n = sub.vp9.length;

  for (i = 0; i < n; i++)
  {
    k = sub.vp9[i].quality; k = k.substr (0, k.search ("p"));
    if ((j = chkformat (k) + 4) >= 4) if (r[j] < k) { f[j] = i + 1; r[j] = k; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0 || (n = f[j] - 1) < 0) throw ("!!!");

  if (j < 4)
    { url = sub.mp4[n].url; fmt = r[j] + "m"; } else
    { url = sub.vp9[n].url; fmt = r[j] + "w"; }

  if (!url) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_pornhub = async (id, frame, fmt) =>
{
  var i, j, k, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  var tag = "pornhub"; if (is_busy (frame)) return;
  var url = "https://www.pornhub.com/embed/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  url = "https://www.pornhub.com/view_video.php?viewkey=" + id;

  var response = await fetch (url);
  var textData = await response.text();

  var s = '"mediaDefinitions":';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  url = textData.substr (n, 3000);
  var sub = url.split ('"quality":"');
  if (sub.length < 2) throw ("!!!");

  for (i = 1; i < sub.length; i++)
  {
    k = sub [i]; k = k.substr (0, k.search ('"'));
    if ((j = chkformat (k)) >= 0) if (r[j] < k) { f[j] = i; r[j] = k; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0) return "";

  url = sub [f[j]]; fmt = r[j];
  url = url.substr (url.search ("http"));
  url = url.substr (0, url.search ('"')); if (url == "") return "";
  url = url.replace (/\\/g, "");

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_vidtodo = async (id, frame, fmt) =>
{
  var tag = "vidtodo"; if (is_busy (frame)) return;
  var url = "https://vidtodu.com/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (url);
  var textData = await response.text();

  var n = textData.search ("'\\|\\|\\|"); if (n < 0) throw ("!!!");

  url = textData.substr (n + 3, 2000);
  url = url.substr (0, url.search ("split"));
  url = url.replace (/\|\|/g, "|");

  n = url.search ("\\|file\\|"); if (n < 0) throw ("!!!");

  var sub = url.substr (n + 6, 10);
  if (sub.search ("js") == 0) sub = sub.substr (3);
  sub = sub.substr (0, sub.search ("\\|"));

  url = crack_stream (url, frame, fmt); if (url == "") throw ("!!!");
  n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

  url = "https://" + sub + ".vidtodo.com/" + url + "/v.mp4";

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_clipwatching = async (id, frame, fmt) =>
{
  var tag = "clipwatch"; if (is_busy (frame)) return;
  var url = "https://clipwatching.com/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var n = textData.search ("'\\|\\|\\|"); if (n < 0) throw ("!!!");

  url = textData.substr (n + 3, 2000);
  url = url.substr (0, url.search ("split"));
  url = url.replace (/\|\|/g, "|");

  var s = "\\|3D0\\|s"; var n = url.search (s);
  if (n < 0) { s = "\\|3E\\|s"; n = url.search (s); }
  if (n < 0) throw ("!!!");

  var sub = url.substr (n + s.length - 3, 10);
  sub = sub.substr (0, sub.search ("\\|"));

  url = crack_stream (url, frame, fmt); if (url == "") throw ("!!!");
  n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

  url = "https://" + sub + ".clipwatching.com/" + url + "/v.mp4";

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_flix555 = async (id, frame, fmt) =>
{
  var tag = "flix555"; if (is_busy (frame)) return;
  var url = "https://flix555.com/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var n = textData.search ("'\\|\\|\\|"); if (n < 0) throw ("!!!");

  url = textData.substr (n + 3, 2000);
  url = url.substr (0, url.search ("split"));
  url = url.replace (/\|\|/g, "|");

  n = url.search ("\\|file\\|"); if (n < 0) throw ("!!!");

  var sub = url.substr (n + 6, 10);
  sub = sub.substr (0, sub.search ("\\|"));

  url = crack_stream (url, frame, fmt); if (url == "") throw ("!!!");
  n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);

  url = "https://" + sub + ".flix555.com/" + url + "/v.mp4";

} catch (err) { console.log (err); busy = 0; }

  error = id; if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_onlystream = async (id, frame, fmt) =>
{
  var tag = "onlystream"; if (is_busy (frame)) return;
  var url = "https://onlystream.tv/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var n = textData.search ("'\\|\\|\\|"); if (n < 0) throw ("!!!");

  url = textData.substr (n + 3, 2000);
  url = url.substr (0, url.search ("split"));
  url = url.replace (/\|\|/g, "|");

  n = url.search ("ostreamcdn"); if (n < 0) throw ("!!!");
  var sub = url.substr (n + 11); sub = sub.substr (0, sub.search ("\\|"));

  if (url.search ("\\|logo\\|mp4\\|") > 0)
  {
    url = crack_stream (url, frame, fmt); if (url == "") throw ("!!!");
    n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    url = "https://" + sub + ".ostreamcdn.com/" + url + "/v.mp4";
  }
  else
  {
    n = url.search ("\\|logo\\|"); if (n < 0) throw ("!!!");
    url = url.substr (n + 6); url = url.substr (0, url.search ("\\|"));
    url = "https://" + sub + ".ostreamcdn.com/hls/," + url + ",.urlset/master.m3u8";

    if (stream_all (frame, 1)) fmt = 0; else
    {
      response = await fetch (url);
      textData = await response.text();

      url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }
  }

} catch (err) { console.log (err); busy = 0; }

  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

const req_vidlox = async (id, frame, fmt) =>
{
  var tag = "vidlox"; if (is_busy (frame)) return;
  var url = "https://vidlox.me/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var s = "sources:";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n, 1000);
  var sub = url.split ("http"); if (sub.length < 2) throw ("!!!");

  if (sub [1].search ("mp4")  > 0) n =  1; else
  if (sub [2].search ("mp4")  > 0) n =  2; else
  if (sub [1].search ("m3u8") > 0) n = -1; else
  if (sub [2].search ("m3u8") > 0) n = -2; else throw ("!!!");

  if (n < 0) { n = -n; stream_all (frame, 1); }

  url = "http" + sub [n];
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_rapidvideo = async (id, frame, fmt) =>
{
  var tag = "rapidvideo"; if (is_busy (frame)) return;
  var url = "https://rapidvideo.com/e/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 200);
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_vidoza = async (id, frame, fmt) =>
{
  var tag = "vidoza"; if (is_busy (frame)) return;
  var url = "https://vidoza.net/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 200);
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_vshare = async (id, frame, fmt) =>
{
  var tag = "vshare"; if (is_busy (frame)) return;
  var url = "https://vshare.eu/embed-" + id + ".html";
  document.getElementById ("id" + frame).value = tag + " (ID)";

if (document.getElementById ("mov" + frame + "c").checked) fmt = 0; else
try
{
  var response = await fetch (cors_bypass + url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 200);
  url = url.substr (0, url.search ('"'));
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

const req_audiorealm = async (id, frame, fmt) =>
{
  var tag = "audiorealm"; if (is_busy (frame)) return;
  var url = cors_bypass + "http://audiorealm.com/station/listen/id/" + id;
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "'listenurl'>";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n + s.length, 100);
  url = url.substr (0, url.search ("<"));
  if (url == "") throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  error = id; no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + ": " + id);
}
////////////////////

///////////////////
///// DIG DUG /////
///////////////////

var digmovie = function (frame)
{
  var doc, src, fmt;

  clear_video (frame);

  if (document.getElementById ("mov" + frame + "p").checked)
    cors_bypass = document.getElementById ("proxy").value; else cors_bypass = "";

  doc = document.getElementById ("fmt" + frame);
  if (!(fmt = doc.value)) fmt = doc.options[0].value;

  src = document.getElementById ("src" + frame).value;
  doc = document.getElementById ("line" + frame).value;

  if (src == 2 ) dig_vidcloud (doc, frame, fmt); else
  if (src == 3 ) dig_tubitv (doc, frame, fmt); else
  if (src == 4 ) dig_putlocker (doc, frame, fmt); else
  if (src == 5 ) dig_lunchflix (doc, frame, fmt); else
  if (src == 21) dig_audiorealm (doc, frame, fmt); else

  document.getElementById ("id" + frame).value = "Not supported";
}
////////////////////

const dig_vidcloud = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "vidcloud"; var url = doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "<iframe src=";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n, 100);
  url = url.substr (url.search ("id=") + 3);
  if ((n = url.search ("=")) > 0) url = url.substr (0, n);
  if ((n = url.search ("&")) > 0) url = url.substr (0, n);

  if (url.length < 6 || url.length > 8) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_vidcloud (url, frame, fmt);
}
////////////////////

const dig_tubitv = async (doc, frame, fmt) =>
{
  var tag = "tubitv"; if (is_busy (frame)) return;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var url = doc.substr (doc.search ("movies") + 7);
  url = url.substr (0, url.search ("/"));
  if (url.length != 6) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_tubitv (url, frame, fmt);
}
////////////////////

const dig_putlocker = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "putlocker"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = "'shortlink'";
  var n = textData.search (s); if (n < 0) throw ("!!!");

  url = textData.substr (n, 100);
  url = url.substr (url.search ("p=") + 2);
  url = url.substr (0, url.search ("'"));
  if (url == "") throw ("!!!");

  url = cors_bypass + "https://www.putlocker.fyi/embed-src/" + url;

  var response = await fetch (url);
  var textData = await response.text();

  var s = 'src="';
  var n = textData.search (s); if (n < 0) throw ("!!!");
  
  url = textData.substr (n, 100);
  url = url.substr (url.search ("/e/") + 3);
  n = url.search ("/"); if (n < 0) n = url.search ('"');
  url = url.substr (0, n);

  if (url.length < 9 || url.length > 11) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_verystream (url, frame, fmt);
}
////////////////////

const dig_lunchflix = async (doc, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var tag = "lunchflix"; var url = cors_bypass + doc;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

  var s = '<source src="';
  var n = textData.search (s);

  if (n < 0)
  {
    s = '<IFRAME SRC="';
    n = textData.search (s); if (n < 0) throw ("!!!");
    url = textData.substr (n, 100);

    url = url.substr (url.search ("embed-") + 6);
    url = url.substr (0, url.search ('"'));
    n = url.search ("htm"); if (n > 0) url = url.substr (0, n - 1);
    if (url.length != 12) throw ("!!!");
    busy = -busy;
  }
  else
  {
    url = textData.substr (n + s.length, 500);
    url = url.substr (0, url.search ('"'));
    if (url == "") throw ("!!!");
  }

} catch (err) { console.log (err); busy = 0; }

  if (busy > 0)
  {
    no_fail (frame); no_format (frame); loadwindow (url, frame, tag + ": id-none");
  }
  else if (no_fail (frame)) req_gounlimited (url, frame, fmt);
}
////////////////////

const dig_audiorealm = async (doc, frame, fmt) =>
{
  var tag = "audiorealm"; if (is_busy (frame)) return;
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{ 
  var url = doc.substr (doc.search ("play") + 5);
  url = url.substr (0, url.search ("/"));

  if (url.length < 3 || url.length > 6) throw ("!!!");

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) req_audiorealm (url, frame, fmt);
}
////////////////////

//////////////////////////
///// INTERNET RADIO /////
//////////////////////////

var radio = function (url)
{
  document.getElementById ("ir_url").value = url;
  ir_action (0); if (url) ir_action (2);
}
////////////////////

var ir_action = function (mode)
{
  var win = document.getElementById ("internet_radio");
  var pop = document.getElementById ("ir_popup");
  var sts = document.getElementById ("ir_status");
  var vol = document.getElementById ("ir_volume");
  var url = document.getElementById ("ir_url").value;

  var src_ok = (win.src && win.src != "file:///");
  var volume = vol.value * 1;

  if (mode == 3)
  {
    sts = pop.checked; pop.checked = !sts;
    pop.className = (sts ? "is_off" : "is_on");
    return;
  }

  if (mode == 2 && url.search (":") < 0)
  {
    if (url.length != 11) return;
    url = invidious_url + "/latest_version?local=true&itag=251&id=" + url;
    document.getElementById ("ir_url").value = url;
  }

  if (mode == 2 && pop.checked && url)
  { loadwindow (url, -volume, "Internet Radio"); return; }

  if (mode == 2 && !src_ok) if (url)
  { if (last_time > get_time() - 2) mode = 0; else win.src = url; last_time = the_time; }
  else
  {
    url = document.getElementsByName ("ir");
    for (var i = 0; i < url.length; i++) if (url[i].checked) url[i].onchange();
    return;
  }

  if (mode == 2 || (mode == -1 && src_ok))
  { sts.value = "Playing"; win.play(); }

  if (mode == 1 && src_ok)
  { sts.value = "Paused"; win.pause(); }

  if (mode == 0)
  { sts.value = "Stopped"; win.pause(); win.src = "file:///"; }

  if (mode == 4 && volume > 0) volume -= volume > 40 ? 10 : 5;
  if (mode == 5 && volume < 100) volume += volume < 40 ? 5 : 10;

  win.muted = true; win.volume = volume / 100;
  win.muted = false; vol.value = volume;
}
////////////////////

var popper = function (frame, mode)
{
  var i, j, k, val = txt = "";
  var win = document.getElementById ("pop" + frame);
  var index = win.style.zIndex; if (!index) index = -1;
  var multi = document.getElementById ("mov" + frame + "m").checked;

  if (mode.length != undefined)
  {
    txt = mode.substr (mode.search ("<>") + 2);
    val = mode.substr (0, mode.search ("<>"));
    txt = txt.substr (txt.search (" ") + 1);
    if (val == "") mode = multi = 1;
  }

  if (mode && mode.length == undefined)
  {
    
    if (mode == 1) win.style.zIndex = multi ? -index : index;
    if (mode == 2) win.style.zIndex = -1;
    if (mode == 3) win.style.zIndex = -2;
    if (mode == 4) win.style.zIndex = multi ? 2 : -2;
    return;
  }

  var box = document.getElementById ("stk" + frame);
  var doc = win.getElementsByTagName ("table");

  if (doc.length < 2 || !(doc = doc [1])) doc = null;
  if (doc) doc = doc.getElementsByTagName ("button");
  if (!doc || doc.length < 2) doc = null;

  if (mode)
  {
    if (doc)
    {
      for (i = 0; i < doc.length - 1; i++)
        if (txt == doc[i].innerHTML) break;

      for (; i > 0; i--)
      {    
        doc[i].value = doc[i-1].value;
        doc[i].innerHTML = doc[i-1].innerHTML;
      }
      doc[0].value = mode; doc[0].innerHTML = txt;
    }
    error = val;
    if (frame == 5) loadid (frame, 2);
    if (frame == 6) loadnews (frame, 2);
    if (frame == 7) loadmovie (frame, 2);
    return;
  }

  var start = '<button onclick="javascript:popper(' + frame + ',this.value)" value="';
  var middle2 = '" style="background-color:powderblue">';
  var middle1 = '" style="background-color:pink">';
  var pop = "<table><tr><td>";

  var n = Math.floor (((i = box.length) + 2) / 3);
  if ((i -= 36) > 0) n = 12; else i = 1;

  for (j = k = 0; k < 3; i++)
  {
    if (i >= box.length) { val = ""; txt = "-"; } else
      { val = box.options[i].value; txt = box.options[i].innerText; }
    pop = pop + start + val + "<>" + txt + middle1 + txt + "</button><br>";
    if (++j >= n) { j = 0; if (++k < 3) pop = pop + "</td><td>"; }
  }
  pop = pop + "</td></tr></table><table><tr><td>";

  for (i = 0, j = k = 0; k < 3; i++)
  {
    if (!doc || i >= doc.length) { val = ""; txt = "-"; } else
      { val = doc[i].value; txt = doc[i].innerText; }
    pop = pop + start + val + middle2 + txt + "</button><br>";
    if (++j >= 4) { j = 0; if (++k < 3) pop = pop + "</td><td>"; }
  }
  win.innerHTML = pop + "</td></tr></table>";
  if (multi) win.style.zIndex = 1;
}
////////////////////

//////////////////////
///// LOADWINDOW /////
//////////////////////

var loadwindow = function (url, frame, site)
{
  var h, w, win, raw, title, insert, specs;

  var bstyle = "<body style='margin:0;padding:0;background-color:";
  var istyle = " style='position:absolute;width:100%;height:100%;border:none;outline:none'";
  var vstyle = " autoplay allowfullscreen controls ";

  get_time();

  if (url == "")
  {  
    if ((win = hls_obj [frame])) win.destroy(); hls_obj [frame] = null;
    if ((win = dash_obj [frame])) win.reset(); dash_obj [frame] = null;

    if (site) document.getElementById ("id" + frame).value = site;
    document.getElementById ("vid" + frame).innerHTML = "No Video";
    win = document.getElementById ("mov" + frame); doc = win.parentNode;
    doc.removeChild (win); win.src = "about:blank"; doc.appendChild (win);
    return;
  }

  if (last_time > the_time - 2) return; last_time = the_time;

  if (frame <= 0)
  {
    insert = "<!DOCTYPE html><html><head><title>" + site + "</title></head>" + bstyle;
    insert = insert + "cornflowerblue;color:turquoise;text-align:center'><h1><i>" + site + "</i></h1>";
    insert = insert + "<audio controls style='position:absolute;left:0;bottom:0;width:100%;height:45px' ";
    insert = insert + "id='audio'></audio></body></html>";
    specs = "width=500,height=130,top=100,left=100";

    win = window.open ("about:blank", "audiobox", specs); win.focus();
    win = win.document; win.open(); win.write (insert); win.close();
    win = win.getElementById ("audio"); win.src = url;
    win.volume = frame / -100; win.play();
    return;
  }

  var multi = document.getElementById ("mov" + frame + "m").checked;
  var nplay = document.getElementById ("mov" + frame + "n").checked;

  if (document.getElementById ("mov" + frame + "a").checked) raw = 0; else
  if (document.getElementById ("mov" + frame + "b").checked) raw = 1; else
  if (document.getElementById ("mov" + frame + "c").checked) raw = 2; else raw = 0;

  if (site != "")
  {
    if (typeof (url) != "string" || url.search ("http") != 0)
    {
      document.getElementById ("vid" + frame).innerHTML = "Bad URL";
      return;
    }

    document.getElementById ("id" + frame).value = site;
    document.getElementById ("line" + frame).value = url;

    if (nplay)
    {
      document.getElementById ("vid" + frame).innerHTML = "No Play";
      return;
    }
  }

  ir_action (1);

  if (raw == 1)
  {
    title = "Wrapper";
    insert = "'><video" + istyle + vstyle + "id='video'></video></body>";
  }

  if (raw == 2)
  {
    title = "Sandbox";
    insert = "'><iframe" + istyle + vstyle + "src='" + url +
      "' sandbox='allow-scripts allow-same-origin allow-forms'></iframe></body>";
  }

  if (document.getElementById ("btn" + frame + "b").checked)
  {
    var lft, top;

    win = document.getElementById ("win" + frame);
    if (!(specs = win.value)) specs = win.options[0].value;

    h = specs.search (":");
    w = specs.substr (0, h);
    h = specs.substr (h + 1);

    lft = (window.screen.width - w)  / 2;
    top = (window.screen.height - h) / 3;

    specs = "width=" + w + ",height=" + h + ",top=" + top + ",left=" + lft;
  }

  else if (document.getElementById ("btn" + frame + "a").checked)
  {
    h = w = 0; specs = "";
  }

  else
  {
    document.getElementById ("vid" + frame).innerHTML = "No Video";
    win = document.getElementById ("mov" + frame);

    if (raw != 1) win.src = url; else
    {
      win = win.contentDocument; insert = bstyle + "black" + insert;
      load_stream (frame, true, insert, url, win);
    }
    return;
  }

  if (multi) vidwin = null; else if (h != last_h || w != last_w || raw != last_raw)
  {
    if (vidwin) vidwin.close(); vidwin = null;
  }
  if (!vidwin || vidwin.closed) vidwin = window.open ("about:blank", "_blank", specs);
  last_h = h; last_w = w; last_raw = raw;

  if (raw == 0) vidwin.location = url; else
  {
    bstyle = "<!DOCTYPE html><html><head><title>" + title + "</title></head>" + bstyle;
    win = vidwin.document; insert = bstyle + "black" + insert + "</html>";
    load_stream (frame, false, insert, url, win);
  }
  vidwin.focus(); document.getElementById ("vid" + frame).innerHTML = "";
}
////////////////////

var oops = function (frame, fatal)
{
  if (fatal && frame > 0)
  {
    loadwindow ("", frame, "");
    document.getElementById ("vid" + frame).innerHTML = "Doh!";
  }
}
////////////////////

var load_stream = function (frame, is_local, insert, url, doc)
{
  var hls_cfg = {
    debug: false,
    capLevelOnFPSDrop: true,
    capLevelToPlayerSize: true,
    startLevel: 2,
    fpsDroppedMonitoringPeriod: 3000,
    fpsDroppedMonitoringThreshold: 0.1,
    minAutoBitrate: 350000
  };

  if (!doc) return; doc.open(); doc.write (insert); doc.close();

  if ((win = doc.getElementById ("video")) == undefined) return;

  if (is_local)
  {
    win.onplay  = function() { if (!this.seeking) popper (frame, 3); }
    win.onpause = function() { if (!this.seeking) popper (frame, 4); }
  }

  var hls = document.getElementById ("hls" + frame).checked;
  var obj = is_local ? frame : 0;

  if (!hls)
  {
    win.src = url;
  }
  if (hls == 1)
  {
    hls_obj [obj] = new Hls (hls_cfg);
    hls_obj [obj].loadSource (url);
    hls_obj [obj].attachMedia (win);
    hls_obj [obj].on (Hls.Events.ERROR, function (event,data) { oops (obj, data.fatal) });
  }
  if (hls == 2)
  {
    dash_obj [obj] = dashjs.MediaPlayer().create();
    dash_obj [obj].getDebug().setLogToBrowserConsole(false);   // turn off fracking console messages!
    dash_obj [obj].initialize (win, url, true);
  }
}
////////////////////

/*  HLS configuration options (https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning)

var config = {
      autoStartLoad: true,
      startPosition: -1,
      debug: false,
      capLevelOnFPSDrop: false,
      capLevelToPlayerSize: false,
      defaultAudioCodec: undefined,
      initialLiveManifestSize: 1,
      maxBufferLength: 30,
      maxMaxBufferLength: 600,
      maxBufferSize: 60*1000*1000,
      maxBufferHole: 0.5,
      lowBufferWatchdogPeriod: 0.5,
      highBufferWatchdogPeriod: 3,
      nudgeOffset: 0.1,
      nudgeMaxRetry: 3,
      maxFragLookUpTolerance: 0.25,
      liveSyncDurationCount: 3,
      liveMaxLatencyDurationCount: Infinity,
      enableWorker: true,
      enableSoftwareAES: true,
      manifestLoadingTimeOut: 10000,
      manifestLoadingMaxRetry: 1,
      manifestLoadingRetryDelay: 1000,
      manifestLoadingMaxRetryTimeout: 64000,
      startLevel: undefined,
      levelLoadingTimeOut: 10000,
      levelLoadingMaxRetry: 4,
      levelLoadingRetryDelay: 1000,
      levelLoadingMaxRetryTimeout: 64000,
      fragLoadingTimeOut: 20000,
      fragLoadingMaxRetry: 6,
      fragLoadingRetryDelay: 1000,
      fragLoadingMaxRetryTimeout: 64000,
      startFragPrefetch: false,
      fpsDroppedMonitoringPeriod: 5000,
      fpsDroppedMonitoringThreshold: 0.2,
      appendErrorMaxRetry: 3,
      loader: customLoader,
      fLoader: customFragmentLoader,
      pLoader: customPlaylistLoader,
      xhrSetup: XMLHttpRequestSetupCallback,
      fetchSetup: FetchSetupCallback,
      abrController: AbrController,
      bufferController: BufferController,
      capLevelController: CapLevelController,
      fpsController: FPSController,
      timelineController: TimelineController,
      enableWebVTT: true,
      enableCEA708Captions: true,
      stretchShortVideoTrack: false,
      maxAudioFramesDrift: 1,
      forceKeyFrameOnDiscontinuity: true,
      abrEwmaFastLive: 3.0,
      abrEwmaSlowLive: 9.0,
      abrEwmaFastVoD: 3.0,
      abrEwmaSlowVoD: 9.0,
      abrEwmaDefaultEstimate: 500000,
      abrBandWidthFactor: 0.95,
      abrBandWidthUpFactor: 0.7,
      abrMaxWithRealBitrate: false,
      maxStarvationDelay: 4,
      maxLoadingDelay: 4,
      minAutoBitrate: 0,
      emeEnabled: false,
      widevineLicenseUrl: undefined,
      requestMediaKeySystemAccessFunc: requestMediaKeySystemAccess
  };
*/

//////////////////////////////
///// GENERIC BRIGHTCOVE /////
//////////////////////////////

const find_brightcove = async (doc, xtag, frame, fmt) =>
{
  if (is_busy (frame)) return;
  var url = cors_bypass + doc;
  var tag = xtag; if (tag == "") tag = "brightcove";
  document.getElementById ("id" + frame).value = tag + " (DIG)";

try
{
  var response = await fetch (url);
  var textData = await response.text();

  var s = 'data-account="';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  var pub = textData.substr (n + s.length, 100);
  pub = pub.substr (0, pub.search ('"'));

  s = 'data-video-id="'; n = textData.search (s);
  if (n < 0) { s = 'data-video-id-pending="'; n = textData.search (s); }
  if (n < 0) throw ("!!!");

  var id = textData.substr (n + s.length, 100);
  id = id.substr (0, id.search ('"'));

} catch (err) { console.log (err); busy = 0; }

  busy = -busy; if (no_fail (frame)) load_brightcove (pub, id, xtag, frame, fmt);
}
////////////////////

const load_brightcove = async (pub, id, xtag, frame, fmt) =>
{
  var i, j, k, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  if (is_busy (frame)) return;
  var tag = xtag; if (tag == "") tag = "brightcove";

  if (pub == "")
  {
    i = id.search ("-"); pub = id.substr (0, i); id = id.substr (i + 1);
  }
  
  var url = "https://players.brightcove.net/" + pub + "/default_default/index.min.js";
  document.getElementById ("id" + frame).value = tag + " (ID)";

try
{
  if (pub.length < 10 || pub.length > 13 || id.length < 10 || id.length > 13) throw ("!!!");

  response = await fetch (url);
  textData = await response.text();

  var s = 'accountId:"' + pub + '",policyKey:"';
  var n = textData.search (s); if (n < 0) throw ("!!!");

  var pk = textData.substr (n + s.length, 200);
  pk = pk.substr (0, pk.search ('"'));

  url = "https://edge.api.brightcove.com/playback/v1/accounts/" + pub + "/videos/" + id;

  response = await fetch (url, { headers: { 'Accept': 'application/json;pk=' + pk }, });
  textData = await response.json();

  var url_m3u8 = ""; var dat = textData.sources; if (dat == undefined) throw ("!!!");

  for (i = 0; i < dat.length; i++)
  {
    url = dat [i].src; if (url == undefined) continue;
    if (url.search ("m3u8") > 0) { url_m3u8 = url; continue; }
    k = dat [i].height; if (k == undefined) continue;

    if ((j = chkformat (k)) >= 0) if (r[j] < k) { f[j] = i + 1; r[j] = k; }
  }

  if ((k = getformat (f, fmt)))
  {
    if ((k = argformat (k)) < 0 || (k = f[k] - 1) < 0) throw ("!!!");
    url = dat [k].src; fmt = dat [k].height; fixformat (f, frame);
  }
  else
  {
    if ((url = url_m3u8) == "") throw ("!!!");
    if (stream_all (frame, 1)) fmt = 0; else
    {
      response = await fetch (url);
      textData = await response.text();

      url = crack_m3u8 (url, textData, frame, fmt); if (url == "") throw ("!!!");
      n = url.search ("<>"); fmt = url.substr (n + 2); url = url.substr (0, n);
    }
  }

} catch (err) { console.log (err); busy = 0; }

  if (xtag == "") id = pub + "-" + id;
  error = id; if (!fmt) no_format (frame);
  if (no_fail (frame)) loadwindow (url, frame, tag + " [" + fmt + "]: " + id);
}
////////////////////

var crack_stream = function (data, frame, fmt)
{
  var url, n, f = [0,0,0,0,0,0,0,0];

  n = data.search ("\\|image");
  if (n > 0) data = data.substr (n);

  n = data.search ("360p"); f[0] = n < 0 ? 0 : n;
  n = data.search ("480p"); f[1] = n < 0 ? 0 : n;
  n = data.search ("720p"); f[2] = n < 0 ? 0 : n;

  fmt = getformat (f, fmt); fixformat (f, frame);

  if ((n = argformat (fmt)) < 0)
  { console.log(n);
    fmt = 0; n = data.search ("\\|mp4\\|"); if (n < 0) return "";
  }
  else
  {
    if (n == 0) fmt = 360;
    if (n == 1) fmt = 480;
    if (n == 2) fmt = 720;
    n = f[n];
  }
    
  url = data.substr (n + 5);

  n = url.search ("\\|"); if (n >= 0 && n < 20) url = url.substr (n+1);
  n = url.search ("\\|"); if (n >= 0 && n < 20) url = url.substr (n+1);
  url = url.substr (0, url.search ("\\|"));

  if (url == "") return ""; else return (url + "<>" + fmt);
}
////////////////////

var crack_source = function (data, frame, fmt)
{
  var sub, str, url, i, j, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  sub = data.split ("<source src="); if (sub.length < 2) return "";

  for (i = 1; i < sub.length; i++)
  {
    str = sub [i]; j = str.search ('label="');
    str = str.substr (j + 7); str = str.substr (0, str.search ('"'));
    if ((j = str.search ("p")) > 0) str = str.substr (0, j);
    if ((j = chkformat (str)) >= 0) if (r[j] < str) { f[j] = i; r[j] = str; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0) return "";

  str = sub [f[j]]; fmt = r[j];
  url = str.substr (1); str = str.substr (0,1);
  url = url.substr (0, url.search (str)); if (url == "") return "";

  return (url + "<>" + fmt);
}
////////////////////

var crack_smil = function (data, frame, fmt)
{
  var sub, str, url, i, j, url, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0];

  str = '<audio src="'; j = data.search (str);

  if (j > 0)
  {
    url = data.substr (j + str.length, 200);
    url = url.substr (0, url.search ('"'));

    if (url == "") return ""; else return (url + "<>");
  }

  sub = data.split ('<video src="');
  if (sub.length < 2) return "";

  for (i = 1; i < sub.length; i++)
  {
    str = sub [i];

    if ((j = str.search ("height")) > 0)
    {
      str = str.substr (j + 8);
      str = str.substr (0, str.search ('"'));
    }
    else if ((j = str.search ("bitrate")) < 0) continue; else
    {
      str = str.substr (j + 9);
      str = str.substr (0, str.search ('"'));
      if (str == "1700000") str = "720"; else
      if (str == "1300000") str = "504"; else
      if (str ==  "900000") str = "360"; else continue;
    }

    if ((j = chkformat (str)) >= 0) if (r[j] < str) { f[j] = i; r[j] = str; }
  }

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0) return "";

  url = sub [f[j]]; fmt = r[j];
  url = url.substr (0, url.search ('"'));
  if (url == "") return "";

  return (url + "<>" + fmt);
}
////////////////////

///////////////////////
///// M3U8 LOADER /////
///////////////////////

var crack_m3u8 = function (path, data, frame, fmt)
{
  var sub, str, br, url, audio, i, j, f = [0,0,0,0,0,0,0,0], r = [0,0,0,0], b = [0,0,0,0];

  sub = data.split ("#EXT-X-STREAM-INF"); if (sub.length < 2) return "";

  for (i = 1; i < sub.length; i++)
  {
    j = sub [i].search ("RESOLUTION"); if (j < 0) continue;

    str = sub [i]; str = str.substr (j + 11); j = str.search ("x");
    br = str.substr (0, j); str = str.substr (j + 1, 4);
    url = str.substr (3,1); if (url < "0" || url > "9") str = str.substr (0,3);

    br = br * str * 2 + 250000; url = sub [i];
    url = url.substr (url.search ("BANDWIDTH") + 10);
    url = url.substr (0, url.search (","));
    if (url != "") br = url - br; else br = 0;
    if (br > 0) br *= 3; else br *= -2;

    if ((j = chkformat (str)) >= 0)
      if (r[j] < str || (r[j] == str && br < b[j]))
        { f[j] = i; r[j] = str; b[j] = br; }
  }

  if (f[1] || f[2]) if (r[0] < 240) f[0] = 0;

  fmt = getformat (f, fmt); fixformat (f, frame);
  if ((j = argformat (fmt)) < 0) return (path + "<>0");

  audio = sub [0]; sub = sub [f[j]].split ("\n");
  str = sub [1]; url = merge_url (path, str) + str;

  if ((i = audio.search ("#EXT-X-MEDIA:TYPE=AUDIO")) < 0) audio = ""; else
    if ((i = audio.search ('URI="')) < 0) audio = ""; else
    {
      audio = audio.substr (i + 5);
      audio = audio.substr (0, audio.search ('"'));
      audio = merge_url (path, audio) + audio;
    }

  if (document.getElementById ("mov" + frame + "n").checked) make_downloader (url, audio);
  fmt = 0; if (audio != "") url = path; else fmt = r[j];
  return (url + "<>" + fmt);
}
////////////////////

var merge_url = function (path1, path2)
{
  var url = "", sub, str, i, j, k;

  if (path2.search ("http") == 0) return "";

  sub = path1.split ("/"); str = path2.split ("/");
  if (str[0] == "") k = str.length; else k = 1;
  j = sub.length - k; if (j < 3) j = 3;

  for (i = 0; i < j; i++) url = url + sub [i] + "/";

  if (k > 1) url = url.substr (0, url.length - 1);

  return url;
}
////////////////////

//////////////////////
///// DOWNLOADER /////
//////////////////////

const make_downloader = async (vid, aud) =>
{
  var i, m, n, p = 0, url, data, name, doc, done = false, plain_text = false;

  url = vid; doc = head; download_doc = head + "Waiting for stream file..." + tail;

try
{ 
  var response = await fetch (url);
  var textData = await response.text();

} catch (err) { download_doc = head + "Could not get stream file." + tail; return; }

  
  if (aud != "") if (plain_text)
    doc = doc + "\n<br>Audio Stream Source<br>\n" + aud + "\n<br>"; else
    doc = doc + "\n<p>\n<a href='" + aud + "'>Audio Stream Source</a>";

  if (plain_text)
    doc = doc + "\n<br>Video Stream Source<br>\n" + url + "\n<br><br>"; else
    doc = doc + "\n<p>\n<a href='" + url + "'>Video Stream Source</a>\n<br><br>";

  var sub = textData.split ("#EXTINF");

  for (i = 1; i < sub.length - 1; i++)
  {
    data = sub [i].split ("\n");
    if (!done) { url = merge_url (url, data [1]); done = true; }
    data = url + data [1];

    name = ++p; if (p < 10) name = "00" + p; else if (p < 100) name = "0" + p;

    if (plain_text)
      data = "\n<p>\n" + data; else
      data = "\nSegment <a href='" + data + "'>" + name + "</a>&nbsp;&nbsp;&nbsp;";

    if (!(p % 5)) data = data + "\n<br><br>";

    doc = doc + data;
  }

  download_doc = doc + "\n<br>\n<div style='width:10vw; height:10vw'></div>" + tail + "\n\n";
}
////////////////////

var open_downloader = function ()
{
  var downloader = window.open ();
  downloader.document.write (download_doc);
  downloader.document.close ();
}
////////////////////

</script>

</html> 
